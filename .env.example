# ╔═══════════════════════════════════════════════════════════════════════╗
# ║  校园轻享集市系统 - 环境配置模板                                           ║
# ║  Campus Lite Marketplace - Environment Configuration Template         ║
# ╚═══════════════════════════════════════════════════════════════════════╝
#
# 📝 作者: BaSui 😎 | 创建日期: 2025-10-25
# 🎯 用途: 这是项目的环境变量配置模板，所有敏感信息应该填在这里！
# 🚀 使用方法:
#    1. 复制此文件: cp .env.example .env
#    2. 修改 .env 中的配置（别动 .env.example！）
#    3. 确保 .env 在 .gitignore 里（防止泄密！）
#
# ⚠️ 重要提醒：
#    - .env.example 是模板，提交到 git（给队友看）
#    - .env 是你的本地配置，千万别提交（有密钥！）
#    - 生产环境的密钥一定要改（别用默认值！）
#
# 💡 小贴士：
#    - 字段名用 UPPER_SNAKE_CASE（大写下划线）
#    - 字符串不用加引号（除非有特殊字符）
#    - 空值留空即可（不用写 null）
#    - 注释用 # 开头（写清楚点，将来的自己会感谢你！）
#
# ═══════════════════════════════════════════════════════════════════════

# ==================== 应用基础配置 ====================
# 🎯 这部分是应用的基本设置，决定了应用的名字、环境、端口等

# 应用名称（标识符，别用中文！）
# 示例: campus-marketplace, my-awesome-app
APP_NAME=campus-marketplace

# Spring 运行环境（开发/测试/生产）
# 可选值: dev（开发）, test（测试）, prod（生产）
# 💡 提示: 开发用 dev，测试用 test，上线用 prod
SPRING_PROFILES_ACTIVE=dev

# 后端服务端口（别和其他服务冲突！）
# 示例: 8200（后端）, 8080（Tomcat默认）, 3000（前端）
# ⚠️ 注意: 生产环境建议用 80（HTTP）或 443（HTTPS）
SERVER_PORT=8200

# API 路径前缀（统一给所有接口加个前缀）
# 示例: /api, /v1, /backend
# 💡 好处: 方便区分前后端路由，Nginx 反向代理也好配
APP_CONTEXT_PATH=/api

# Docker Compose 文件路径（开发环境用）
# 可选值:
#   - docker/docker-compose.dev.yml（开发环境：有热重载、调试端口）
#   - docker/docker-compose.test.yml（测试环境：CI/CD 用）
#   - docker/docker-compose.prod.yml（生产环境：高可用、负载均衡）
DOCKER_COMPOSE_FILE=docker/docker-compose.yml

# ==================== PostgreSQL 数据库配置 ====================
# 🐘 PostgreSQL 是我们的主数据库，存储用户、商品、订单等核心数据

# 数据库服务器地址
# 示例: localhost（本地）, db（Docker容器名）, 192.168.1.100（局域网IP）
# 🚀 生产环境: 填写云数据库的外网地址（如阿里云RDS）
DB_HOST=localhost

# 数据库服务端口
# 默认: 5432（PostgreSQL标准端口）
# ⚠️ 注意: 生产环境建议改成非标准端口（增加安全性）
DB_PORT=5432

# 数据库名称（项目专用数据库）
# 示例: campus_marketplace, test_db, my_app_db
# 💡 提示: 开发/测试/生产用不同的数据库名，避免误操作！
DB_NAME=campus_marketplace

# 数据库用户名
# 示例: postgres（超级管理员，开发用）, app_user（普通用户，生产用）
# ⚠️ 生产环境: 别用 postgres！创建专用账号，只给必要权限！
DB_USERNAME=postgres

# 数据库密码（敏感信息！）
# 示例: 123456（开发用，简单点）, A#9$mK!2pL@7（生产用，复杂点）
# 🔐 生产环境: 必须用强密码（≥16位，包含大小写字母、数字、特殊字符）
# 💡 生成强密码: pwgen -s 32 1  或  openssl rand -base64 32
DB_PASSWORD=123456

# ===== HikariCP 连接池配置（性能优化关键！）=====
# HikariCP 是 Spring Boot 默认的数据库连接池，超快超稳！

# 最小空闲连接数（池中随时待命的连接数）
# 推荐值: 5-10（开发环境）, 10-20（生产环境）
# 💡 作用: 避免请求来了临时创建连接（慢！）
DB_POOL_MIN_IDLE=5

# 最大连接数（池中最多能有多少个连接）
# 推荐值: 10-20（小项目）, 50-100（中项目）, 200+（大项目）
# ⚠️ 注意: 别设太大！数据库也有最大连接数限制（PostgreSQL默认100）
# 💡 计算公式: max_pool_size = (CPU核心数 * 2) + 有效磁盘数
DB_POOL_MAX_SIZE=20

# 连接超时时间（等待连接的最长时间，毫秒）
# 推荐值: 30000（30秒，开发环境）, 10000（10秒，生产环境）
# ⚠️ 太短: 高并发时容易超时；太长: 用户等太久体验差
DB_CONNECTION_TIMEOUT=30000

# 空闲超时时间（连接闲置多久后被回收，毫秒）
# 推荐值: 600000（10分钟）
# 💡 作用: 避免连接长期占用资源不释放
DB_IDLE_TIMEOUT=600000

# 连接最大生命周期（连接存活最长时间，毫秒）
# 推荐值: 1800000（30分钟）
# 💡 作用: 定期刷新连接，避免数据库主动断开导致的连接失效
DB_MAX_LIFETIME=1800000

# 连接池名称（日志里看到的标识）
# 示例: CampusMarketplaceHikariCP, MyAppPool
# 💡 好处: 多个连接池时方便区分
DB_POOL_NAME=CampusMarketplaceHikariCP

# ==================== JPA / Hibernate 配置 ====================
# 🌟 JPA 是 Java 持久化规范,Hibernate 是它的实现,负责 ORM(对象关系映射)

# DDL 自动执行策略(表结构自动同步)
# 可选值:
#   - none: 啥也不干(生产环境推荐)
#   - validate: 只验证表结构,不修改(生产环境可选)
#   - update: 自动更新表结构(开发环境推荐,不会删数据!)
#   - create: 每次启动都重建表(测试环境,会删数据!)
#   - create-drop: 启动时创建,关闭时删除(单元测试用)
# ⚠️ 警告: 生产环境用 none 或 validate!别用 update/create(会丢数据!)
JPA_DDL_AUTO=validate

# 是否在控制台打印 SQL 语句
# 可选值: true(开发时看SQL), false(生产环境别打印,太吵!)
# 💡 好处: 调试时看到实际执行的 SQL,方便排查问题
JPA_SHOW_SQL=true

# 是否格式化 SQL 语句(让 SQL 更易读)
# 可选值: true(格式化,多行显示), false(一行显示)
# 💡 配合 JPA_SHOW_SQL=true 使用,SQL 语句看起来更舒服!
JPA_FORMAT_SQL=true

# 是否允许懒加载时没有事务
# 推荐值: false(关闭,避免懒加载异常)
# ⚠️ 注意: true 会导致 "LazyInitializationException",血的教训!
JPA_ENABLE_LAZY_NO_TRANS=false

# 批量插入的批次大小
# 推荐值: 20-50(根据数据大小调整)
# 💡 作用: 批量插入时每批插入多少条,提升性能!
JPA_BATCH_SIZE=50

# 批量操作时是否对 INSERT 排序
# 推荐值: true(启用,减少死锁)
# 💡 好处: 相同表的插入操作会排序执行,避免并发死锁
JPA_ORDER_INSERTS=true

# 批量操作时是否对 UPDATE 排序
# 推荐值: true(启用,减少死锁)
JPA_ORDER_UPDATES=true

# 是否启用二级缓存(减少数据库查询)
# 推荐值: true(启用,性能提升明显!)
# 💡 作用: 缓存查询结果,下次直接从内存读取
HIBERNATE_SECOND_LEVEL_CACHE=true

# 是否启用查询缓存(缓存 HQL/JPQL 查询结果)
# 推荐值: true(启用,配合二级缓存使用)
HIBERNATE_QUERY_CACHE=true

# ==================== Redis 缓存配置 ====================
# 🔥 Redis 是内存数据库,超级快!用来做缓存、Session、消息队列

# Redis 服务器地址
# 示例: localhost(本地), redis(Docker容器名), 192.168.1.200(局域网IP)
# 🚀 生产环境: 填写云Redis地址(如阿里云Redis)
REDIS_HOST=localhost

# Redis 服务端口
# 默认: 6379(Redis标准端口)
# ⚠️ 生产环境: 建议改成非标准端口(增加安全性)
REDIS_PORT=6379

# Redis 密码(敏感信息!)
# 示例: 留空(无密码,开发用), myRedis@2025(有密码,生产用)
# 🔐 生产环境: 必须设置强密码!
# 💡 生成密码: openssl rand -base64 32
REDIS_PASSWORD=

# Redis 数据库编号(0-15,默认16个库)
# 示例: 0(缓存), 1(Session), 2(消息队列)
# 💡 作用: 不同功能用不同的库,数据隔离
REDIS_DATABASE=0

# ===== Redis 连接池配置 =====

# 连接池最大活跃连接数
# 推荐值: 20(小项目), 50(中项目), 100+(大项目)
# 💡 作用: 控制并发连接数,避免Redis过载
REDIS_POOL_MAX_ACTIVE=20

# 连接池最大空闲连接数
# 推荐值: 10(保持一定空闲连接,快速响应)
REDIS_POOL_MAX_IDLE=10

# 连接池最小空闲连接数
# 推荐值: 5(至少保持5个连接待命)
REDIS_POOL_MIN_IDLE=5

# ===== Redis 哨兵模式配置(高可用) =====
# 哨兵模式: 主从自动切换,防止Redis挂掉导致服务不可用

# 哨兵主节点名称
# 示例: mymaster, redis-master
# 💡 用途: 生产环境高可用配置,开发环境留空即可
REDIS_SENTINEL_MASTER=

# 哨兵节点列表(逗号分隔)
# 示例: 192.168.1.100:26379,192.168.1.101:26379,192.168.1.102:26379
# 💡 要求: 至少3个哨兵节点(奇数个),形成多数派
REDIS_SENTINEL_NODES=

# ==================== 邮件服务配置 ====================
# 📧 用于发送注册验证码、找回密码、通知邮件等

# 邮件服务器地址
# 示例:
#   - localhost(本地MailHog/MailCatcher测试邮件服务器)
#   - smtp.gmail.com(Gmail)
#   - smtp.qq.com(QQ邮箱)
#   - smtp.163.com(网易邮箱)
#   - smtp.exmail.qq.com(腾讯企业邮箱)
MAIL_HOST=localhost

# 邮件服务器端口
# 常用端口:
#   - 1025(MailHog测试服务器)
#   - 25(SMTP标准端口,不加密)
#   - 465(SMTP SSL加密端口)
#   - 587(SMTP TLS加密端口,推荐!)
MAIL_PORT=1025

# 邮箱账号(发件人邮箱)
# 示例: noreply@campus-marketplace.com, service@example.com
# 💡 生产环境: 建议用企业邮箱(更专业,不易被拦截)
MAIL_USERNAME=

# 邮箱密码或授权码(敏感信息!)
# ⚠️ 注意: QQ/163等邮箱需要用"授权码"而不是登录密码!
# 💡 获取授权码: 邮箱设置 → 账户 → POP3/SMTP → 生成授权码
MAIL_PASSWORD=

# 发件人显示名称(收件人看到的名字)
# 示例: 校园轻享集市, Campus Marketplace, 系统通知
MAIL_FROM_NAME=校园轻享集市

# 是否启用 SSL 加密(端口465时用)
# 推荐值: false(开发环境), true(生产环境用Gmail等)
MAIL_SSL_ENABLE=false

# 是否启用 STARTTLS 加密(端口587时用)
# 推荐值: false(开发环境), true(生产环境推荐!)
MAIL_STARTTLS_ENABLE=false

# 开发环境模拟发送开关(只打日志,不真发邮件)
# 推荐值: true(开发环境,省流量!), false(生产环境,真发邮件!)
# 💡 作用: 测试时不想真发邮件?开启这个!
MAIL_MOCK_ENABLED=true

# ==================== 短信服务配置(阿里云) ====================
# 📱 用于发送短信验证码(注册、登录、找回密码)

# 短信服务提供商
# 可选值: aliyun(阿里云), tencent(腾讯云), huawei(华为云)
# 💡 目前仅支持阿里云,其他云厂商需自行对接
SMS_PROVIDER=aliyun

# 阿里云 AccessKey ID(敏感信息!)
# 获取方式: 阿里云控制台 → AccessKey管理 → 创建AccessKey
# 🔗 链接: https://ram.console.aliyun.com/manage/ak
# ⚠️ 注意: 别用主账号AccessKey!创建子账号并授权"短信服务"权限
ALIYUN_SMS_ACCESS_KEY_ID=

# 阿里云 AccessKey Secret(敏感信息!)
# ⚠️ 警告: 千万别泄露!泄露了立即在控制台禁用!
ALIYUN_SMS_ACCESS_KEY_SECRET=

# 短信签名(显示在短信开头)
# 示例: 【校园轻享集市】您的验证码是123456
# 💡 获取: 阿里云短信控制台 → 国内消息 → 签名管理 → 添加签名
# 🔗 链接: https://dysms.console.aliyun.com/domestic/text/sign
# ⚠️ 注意: 签名需审核通过后才能用(1-2个工作日)
ALIYUN_SMS_SIGN_NAME=

# 短信模板编码 - 注册验证码
# 示例: SMS_123456789
# 💡 模板变量: ${code}(验证码)
# 📝 模板示例: 您的注册验证码是${code},5分钟内有效
# 🔗 获取: 阿里云短信控制台 → 模板管理 → 添加模板
ALIYUN_SMS_TEMPLATE_REGISTER=SMS_0000001

# 短信模板编码 - 密码重置验证码
# 示例: SMS_987654321
# 💡 模板变量: ${code}(验证码)
# 📝 模板示例: 您正在重置密码,验证码${code},请勿泄露给他人
ALIYUN_SMS_TEMPLATE_RESET=SMS_0000002

# ==================== JWT 认证配置 ====================
# 🔐 JWT(JSON Web Token)用于用户身份认证,无状态、跨域友好

# JWT 签名密钥(敏感信息!超级重要!)
# ⚠️ 警告: 生产环境必须修改!泄露了所有Token都能伪造!
# 🔑 要求: 建议 ≥64 字节,使用随机生成的强密钥
# 💡 生成方式(3选1):
#   1. Python: python -c "import secrets; print(secrets.token_urlsafe(64))"
#   2. OpenSSL: openssl rand -base64 64 | tr -d '\n'
#   3. Node.js: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
# 📝 示例: 5bwzFhN2dpPiac1wgPaFgb5iu_lEB5JrSxZqv-WIOwRiE_dQOE...
JWT_SECRET=5bwzFhN2dpPiac1wgPaFgb5iu_lEB5JrSxZqv-WIOwRiE_dQOE-fMFxy24-iOXgWm1NxybaJMrkbCXG9mY0a4Q

# JWT Token 有效期(毫秒)
# 推荐值:
#   - 3600000 (1小时,高安全场景)
#   - 86400000 (24小时,常规场景)
#   - 604800000 (7天,低安全场景)
# 💡 提示: 越短越安全,但用户需频繁登录
JWT_EXPIRATION=86400000

# JWT 刷新Token有效期(毫秒)
# 推荐值:
#   - 604800000 (7天)
#   - 2592000000 (30天)
# 💡 作用: Access Token 过期后用 Refresh Token 换新的,无需重新登录
JWT_REFRESH_EXPIRATION=604800000

# JWT Token 请求头字段名
# 标准值: Authorization
# 💡 前端发请求时要带: Authorization: Bearer <token>
JWT_HEADER=Authorization

# JWT Token 前缀
# 标准值: "Bearer "(注意有空格!)
# 📝 完整格式: Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
JWT_PREFIX="Bearer "

# ==================== AES 加密配置 ====================
# 🔒 AES(Advanced Encryption Standard)用于敏感数据加密存储

# AES 加密密钥(敏感信息!超级重要!)
# ⚠️ 警告: 生产环境必须修改!泄露了加密数据都能解密!
# 🔑 要求: 建议 ≥32 字节,支持 AES-256 加密强度
# 💡 生成方式(3选1):
#   1. Python: python -c "import secrets; print(secrets.token_urlsafe(32))"
#   2. OpenSSL: openssl rand -base64 32
#   3. Node.js: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# 📝 示例: JrOagghJ4Ot3e63ObB1CJtOjvwYnk1chSwXR86E_MJs
# 💡 用途: 加密用户手机号、身份证号、银行卡号等敏感信息
AES_KEY=JrOagghJ4Ot3e63ObB1CJtOjvwYnk1chSwXR86E_MJs

# ==================== 验证码配置 ====================
# 🎲 用于注册、登录、找回密码等场景的验证码

# 验证码长度(位数)
# 推荐值: 4(简单), 6(常规), 8(高安全)
# 💡 提示: 6位数字最常见,好记又安全
VERIFICATION_CODE_LENGTH=6

# 验证码有效期(秒)
# 推荐值: 300(5分钟), 600(10分钟), 900(15分钟)
# 💡 作用: 防止验证码被长期利用
VERIFICATION_CODE_EXPIRATION=600

# 验证码发送频率限制(秒)
# 推荐值: 60(1分钟), 120(2分钟)
# 💡 作用: 防止恶意刷验证码(短信轰炸)
# ⚠️ 注意: 太短容易被刷,太长用户体验差
VERIFICATION_RATE_LIMIT=60

# ==================== 双因素认证(2FA)配置 ====================
# 🛡️ 2FA(Two-Factor Authentication)提供额外安全层

# 是否启用双因素认证
# 推荐值: true(启用,高安全场景), false(关闭,普通场景)
# 💡 作用: 登录时除了密码还需验证码(Google Authenticator/短信)
TWO_FACTOR_ENABLED=true

# 2FA 验证码有效期(秒)
# 推荐值: 600(10分钟)
# 💡 提示: TOTP(Google Authenticator)通常30秒刷新一次
TWO_FACTOR_CODE_EXPIRATION=600

# ==================== 文件上传配置 ====================
# 📁 控制用户上传文件的存储位置、类型、大小等

# 文件上传目录(相对路径或绝对路径)
# 示例: ./uploads/dev(开发环境), /var/www/uploads(生产环境)
# 💡 提示: 开发/测试/生产用不同目录,避免数据混乱
FILE_UPLOAD_DIR=./uploads/dev

# 允许上传的文件扩展名(逗号分隔)
# 示例: jpg,jpeg,png,gif(仅图片), pdf,doc,docx(文档)
# ⚠️ 安全提示: 别允许 exe,sh,bat 等可执行文件!
FILE_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif

# 单文件最大尺寸(字节)
# 示例: 5242880(5MB), 10485760(10MB), 52428800(50MB)
# 💡 换算: 1MB = 1024 × 1024 = 1048576 字节
FILE_MAX_SIZE=5242880

# 单次请求最大尺寸(字节,包含多文件)
# 示例: 20971520(20MB), 104857600(100MB)
# 💡 用途: 限制一次性上传所有文件的总大小
FILE_MAX_REQUEST_SIZE=20971520

# 是否启用文件上传功能
# 推荐值: true(启用), false(维护时临时关闭)
FILE_UPLOAD_ENABLED=true

# ==================== 支付宝支付配置 ====================
# 💰 支付宝是国内最流行的支付方式之一

# ===== 获取配置参数的步骤 =====
# 1. 登录支付宝开放平台: https://open.alipay.com
# 2. 进入沙箱环境(测试用): https://open.alipay.com/develop/sandbox/app
# 3. 创建应用 → 配置密钥 → 获取 APPID、公钥、私钥
# 4. 生产环境需申请正式应用并签约产品

# 支付宝应用 ID(APPID)
# 示例: 9021000157621480(沙箱), 2021001234567890(正式)
# 🔗 获取: 支付宝开放平台 → 控制台 → 应用详情
# ⚠️ 注意: 沙箱环境和正式环境的 APPID 不同!
ALIPAY_APP_ID=

# 应用私钥(敏感信息!超级重要!)
# ⚠️ 警告: 千万别泄露!私钥用于签名,泄露后别人能冒充你的应用!
# 💡 格式: 2048位 RSA 私钥,PEM 格式,去掉头尾和换行
# 🔧 生成方式: 支付宝密钥生成器(推荐) 或 OpenSSL
# 📝 示例: MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAo...
# 🔗 密钥生成工具: https://opendocs.alipay.com/common/02kipl
ALIPAY_PRIVATE_KEY=

# 支付宝公钥(用于验签)
# 💡 注意: 这是支付宝的公钥,不是你的应用公钥!
# 🔗 获取: 支付宝开放平台 → 应用详情 → 查看支付宝公钥
# 📝 格式: 2048位 RSA 公钥,PEM 格式,去掉头尾和换行
ALIPAY_PUBLIC_KEY=

# 支付宝网关地址
# 可选值:
#   - https://openapi-sandbox.dl.alipaydev.com/gateway.do (沙箱环境)
#   - https://openapi.alipay.com/gateway.do (正式环境)
# 💡 提示: 开发测试用沙箱,上线后换成正式环境
ALIPAY_GATEWAY_URL=https://openapi-sandbox.dl.alipaydev.com/gateway.do

# 支付结果异步通知地址(后端接口)
# 示例: http://localhost:8200/api/payment/alipay/notify(开发环境)
#      https://api.yourdomain.com/api/payment/alipay/notify(生产环境)
# ⚠️ 注意: 必须是公网可访问的 URL!支付宝会POST调用这个接口!
# 💡 开发环境: 可用 ngrok/frp 等内网穿透工具
ALIPAY_NOTIFY_URL=http://localhost:8200/api/payment/alipay/notify

# 支付完成后的页面跳转地址(前端页面)
# 示例: http://localhost:3000/payment/result(开发环境)
#      https://www.yourdomain.com/payment/result(生产环境)
# 💡 用途: 用户支付完成后浏览器会跳转到这个页面
ALIPAY_RETURN_URL=http://localhost:3000/payment/result

# 数据格式(固定值)
# 标准值: json
ALIPAY_FORMAT=json

# 签名算法类型
# 可选值: RSA(老版本), RSA2(推荐,更安全!)
# 💡 提示: 新应用统一用 RSA2
ALIPAY_SIGN_TYPE=RSA2

# 字符编码(固定值)
# 标准值: UTF-8
ALIPAY_CHARSET=UTF-8

# ==================== 微信支付配置 ====================
# 💚 微信支付是国内最流行的支付方式之一,支持V2和V3两个版本

# 微信支付 API 版本选择
# 可选值: v2(老版本,有沙箱), v3(新版本,更安全!)
# 💡 推荐: v3(新版本,支持国密、证书自动更新等新特性)
# ⚠️ 注意: v2 有沙箱环境可测试,v3 只有正式环境
WECHAT_PAY_VERSION=v3

# ===== 微信支付 V2 配置(沙箱/开发环境) =====
# 🔗 文档: https://pay.weixin.qq.com/wiki/doc/api/index.html

# 微信公众号/小程序 APPID
# 🔗 获取: 微信公众平台 → 开发 → 基本配置 → AppID
# 📝 示例: wx1234567890abcdef
WECHAT_V2_APP_ID=

# 微信支付商户号
# 🔗 获取: 微信商户平台 → 账户中心 → 商户信息
# 📝 示例: 1234567890
WECHAT_V2_MCH_ID=

# 微信支付 API 密钥(敏感信息!)
# ⚠️ 警告: 32位字符串,用于签名,千万别泄露!
# 🔗 设置: 微信商户平台 → 账户中心 → API安全 → 设置API密钥
# 💡 要求: 32位大小写字母+数字组合,建议随机生成
WECHAT_V2_MCH_KEY=

# 商户证书路径(用于退款等敏感操作)
# 🔗 下载: 微信商户平台 → 账户中心 → API安全 → 下载证书
# 📝 示例: classpath:cert/apiclient_cert.p12
# ⚠️ 注意: 证书文件别提交到 git!加到 .gitignore 里!
WECHAT_V2_KEY_PATH=

# 是否使用沙箱环境(仅V2支持)
# 推荐值: true(开发测试), false(生产环境)
# 💡 沙箱环境: 可以测试支付流程,不会产生真实交易
WECHAT_V2_USE_SANDBOX=true

# 支付结果异步通知地址(V2)
# 示例: http://localhost:8200/api/payment/wechat/notify(开发环境)
# ⚠️ 注意: 必须是公网可访问的 URL!
WECHAT_V2_NOTIFY_URL=http://localhost:8200/api/payment/wechat/notify

# ===== 微信支付 V3 配置(正式环境) =====
# 🔗 文档: https://pay.weixin.qq.com/wiki/doc/apiv3/index.shtml

# 微信公众号/小程序 APPID(V3)
# 📝 示例: wxa23d5ae949f8fd73
WECHAT_APP_ID=wxa23d5ae949f8fd73

# 微信支付商户号(V3)
# 📝 示例: 1230000109
WECHAT_MCH_ID=

# 商户API私钥文件路径(V3 需要!)
# 🔗 获取: 微信商户平台 → 账户中心 → API安全 → 管理证书
# 📝 示例: classpath:cert/apiclient_key.pem
# 💡 格式: PEM 格式的 RSA 私钥文件
WECHAT_PRIVATE_KEY_PATH=

# 商户证书序列号(V3 需要!)
# 🔗 获取: 微信商户平台 → 账户中心 → API安全 → 查看证书
# 📝 示例: 5FBDBF1E5D0B6D2F1D2E3F4A5B6C7D8E9F0A1B2C
# 💡 提示: 证书序列号是一串40位的16进制字符
WECHAT_MERCHANT_SERIAL_NUMBER=

# 微信支付 APIv3 密钥(敏感信息!)
# ⚠️ 警告: 32位字符串,用于解密回调数据,千万别泄露!
# 🔗 设置: 微信商户平台 → 账户中心 → API安全 → 设置APIv3密钥
WECHAT_API_V3_KEY=

# 支付结果异步通知地址(V3)
# 示例: http://localhost:8200/api/payment/wechat/notify(开发环境)
#      https://api.yourdomain.com/api/payment/wechat/notify(生产环境)
# ⚠️ 注意: 必须是公网可访问的 HTTPS URL!(V3强制HTTPS)
WECHAT_NOTIFY_URL=http://localhost:8200/api/payment/wechat/notify

# ==================== 佣金配置 ====================
# 💸 平台从每笔交易中抽取的佣金比例

# 默认佣金比例(小数形式)
# 示例: 0.01(1%), 0.05(5%), 0.10(10%)
# 💡 说明: 0.01 表示平台抽取 1% 佣金
COMMISSION_RATE=0.01

# 最小佣金比例
# 推荐值: 0.005(0.5%)
# 💡 作用: 防止佣金率设置过低导致平台亏损
COMMISSION_MIN_RATE=0.005

# 最大佣金比例
# 推荐值: 0.05(5%)
# 💡 作用: 防止佣金率设置过高影响用户体验
COMMISSION_MAX_RATE=0.05

# ==================== 限流配置 ====================
# 🚦 防止恶意刷接口,保护服务器资源

# 是否启用限流
# 推荐值: true(启用,生产环境必须!), false(关闭,开发调试用)
RATE_LIMIT_ENABLED=true

# 默认限流次数(每个IP在限流周期内最多请求次数)
# 推荐值: 100(严格), 500(宽松), 1000(很宽松)
# 💡 说明: 100 表示每个IP每分钟最多请求100次
RATE_LIMIT_DEFAULT_LIMIT=100

# 默认限流周期(秒)
# 推荐值: 60(1分钟), 300(5分钟), 3600(1小时)
# 💡 配合 DEFAULT_LIMIT 使用: 60秒内最多100次请求
RATE_LIMIT_DEFAULT_PERIOD=60

# ==================== 日志配置 ====================
# 📝 日志是排查问题的利器,配置好了事半功倍!

# ===== 日志级别配置 =====
# 可选值: TRACE(最详细) → DEBUG → INFO → WARN → ERROR → FATAL(最严重)
# 💡 建议: 开发用 DEBUG,生产用 INFO 或 WARN

# Root 日志级别(所有第三方库的日志级别)
# 推荐值: INFO(生产), DEBUG(开发)
# 💡 作用: 控制 Spring、Hibernate、Tomcat 等框架的日志输出
LOG_LEVEL_ROOT=INFO

# 应用日志级别(你自己写的代码的日志级别)
# 推荐值: DEBUG(开发,看详细信息), INFO(生产,只看重要信息)
# 💡 包路径: com.campus.marketplace.*
LOG_LEVEL_APP=DEBUG

# SQL 日志级别(显示执行的 SQL 语句)
# 推荐值: DEBUG(开发,看SQL语句), INFO(生产,不打印SQL)
# 💡 作用: 调试数据库操作时超级有用!
LOG_LEVEL_SQL=DEBUG

# Spring Security 日志级别(显示认证/授权过程)
# 推荐值: DEBUG(开发,排查权限问题), WARN(生产)
LOG_LEVEL_SPRING_SECURITY=DEBUG

# Hibernate 二级缓存日志级别
# 推荐值: TRACE(查看缓存命中情况), INFO(生产)
# 💡 用途: 排查缓存是否生效
LOG_LEVEL_BINDER=TRACE

# ===== 日志文件配置 =====

# 日志文件存放目录
# 示例: logs(相对路径), /var/log/campus-marketplace(绝对路径)
# 💡 提示: 确保应用有写权限!
LOG_DIR=logs

# 日志文件基础名称
# 示例: campus-marketplace, app, application
# 💡 实际文件名: campus-marketplace.log, campus-marketplace-2024-01-01.log
LOG_FILE_BASENAME=campus-marketplace

# 日志文件完整路径(自动组合)
# 格式: LOG_DIR/LOG_FILE_BASENAME.log
LOG_FILE_PATH=logs/campus-marketplace.log

# 单个日志文件最大大小
# 示例: 10MB, 100MB, 1GB
# 💡 作用: 文件超过这个大小就自动切割(避免单文件过大)
LOG_FILE_MAX_SIZE=10MB

# 日志文件保留天数
# 推荐值: 7(保留7天), 30(保留30天), 90(保留90天)
# 💡 作用: 超过这个天数的日志会自动删除(节省磁盘空间)
LOG_FILE_MAX_HISTORY=30

# 慢查询日志保留天数
# 推荐值: 7(保留7天)
# 💡 用途: 单独记录慢SQL查询,方便性能优化
SLOW_QUERY_LOG_MAX_HISTORY=7

# ===== 日志格式配置 =====

# 控制台日志格式(开发环境看的)
# 格式说明:
#   %d{yyyy-MM-dd HH:mm:ss} - 时间
#   [%thread] - 线程名
#   %-5level - 日志级别(5位左对齐)
#   %logger{36} - Logger名称(最长36字符)
#   %msg - 日志内容
#   %n - 换行
LOG_PATTERN_CONSOLE="%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# 文件日志格式(保存到文件的格式)
LOG_PATTERN_FILE="%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Logback 日志格式(详细版,包含行号)
# 格式说明:
#   %logger{50}:%line - Logger名称:行号
LOGBACK_PATTERN=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50}:%line - %msg%n

# Logback 彩色日志格式(控制台彩色输出)
# 格式说明:
#   %highlight(%-5level) - 高亮日志级别
#   %cyan(%logger{50}) - 青色 Logger 名称
LOGBACK_PATTERN_COLOR=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %highlight(%-5level) %cyan(%logger{50}):%line - %msg%n

# ==================== Spring Boot Actuator 监控配置 ====================
# 📊 Actuator 提供应用健康检查、指标监控、运行时信息等端点

# 暴露的监控端点(逗号分隔)
# 可选值: *(所有端点), health,metrics,info(指定端点)
# 常用端点:
#   - health: 健康检查(必备!)
#   - metrics: 性能指标(CPU、内存、线程等)
#   - info: 应用信息(版本、描述等)
#   - prometheus: Prometheus 监控指标
#   - env: 环境变量(生产环境慎用!)
#   - loggers: 日志级别动态调整
# ⚠️ 安全提示: 生产环境别暴露所有端点!只暴露必要的!
ACTUATOR_ENDPOINTS=*

# 健康检查详情显示级别
# 可选值:
#   - never: 不显示详情
#   - when-authorized: 仅授权用户可见
#   - always: 始终显示(开发环境推荐)
# 💡 作用: 显示数据库、Redis、磁盘空间等组件的健康状态
ACTUATOR_HEALTH_SHOW_DETAILS=always

# Actuator 端点基础路径
# 示例: /actuator(默认), /monitor, /manage
# 💡 访问方式: http://localhost:8200/actuator/health
ACTUATOR_BASE_PATH=/actuator

# 排除的监控端点(不暴露这些端点)
# 推荐值: shutdown(危险!会关闭应用)
# 💡 作用: shutdown 端点可以远程关闭应用,生产环境必须禁用!
ACTUATOR_EXCLUDE=shutdown

# 是否启用 Prometheus 监控指标
# 推荐值: true(启用,配合 Prometheus + Grafana 监控)
# 🔗 访问: http://localhost:8200/actuator/prometheus
PROMETHEUS_ENABLED=true

# 是否记录 HTTP 请求耗时直方图
# 推荐值: true(启用,可分析接口性能)
# 💡 用途: 统计 P50、P90、P99 响应时间
METRICS_HTTP_HISTOGRAM=true

# 链路追踪采样比例(0.0-1.0)
# 推荐值:
#   - 1.0(100%采样,开发环境)
#   - 0.1(10%采样,生产环境,降低开销)
# 💡 配合 Zipkin/Jaeger 使用,追踪微服务调用链路
TRACING_PROBABILITY=1.0

# ==================== API 文档配置 ====================
# 📖 SpringDoc/Swagger 提供在线 API 文档

# 是否启用 SpringDoc 文档生成
# 推荐值: true(开发), false(生产,不对外暴露)
SPRINGDOC_ENABLED=true

# 是否启用 Swagger UI 界面
# 推荐值: true(开发), false(生产)
# 🔗 访问: http://localhost:8200/swagger-ui.html
SWAGGER_UI_ENABLED=true

# ==================== 调试配置 ====================
# 🐛 开发环境调试辅助配置

# 是否启用调试模式
# 推荐值: true(开发), false(生产)
# 💡 作用: 启用后会打印更多调试信息
DEBUG_ENABLED=true

# 是否显示详细错误信息
# 推荐值: true(开发,看完整堆栈), false(生产,不暴露敏感信息)
DEBUG_SHOW_ERROR_DETAILS=true

# ==================== Tomcat 线程池配置 ====================
# 🚀 Tomcat 内嵌容器的性能调优

# 最大工作线程数
# 推荐值: 200(默认), 500(高并发), 1000+(超高并发)
# 💡 说明: 同时处理请求的最大线程数
TOMCAT_MAX_THREADS=200

# 最小空闲线程数
# 推荐值: 10(默认), 25(中等), 50(高并发)
# 💡 作用: 线程池至少保持这么多线程待命
TOMCAT_MIN_SPARE_THREADS=10

# ==================== 静态资源配置 ====================
# 🖼️ 控制图片、文件等静态资源的存储和访问

# 静态资源基础 URL(用于拼接图片访问路径)
# 示例:
#   - http://localhost:8200(开发环境,后端直接提供)
#   - https://cdn.yourdomain.com(生产环境,使用CDN加速)
#   - https://oss.aliyuncs.com/your-bucket(生产环境,使用OSS)
# 💡 作用: 前端拼接图片URL时使用,如: ${BASE_URL}/uploads/goods/123.jpg
STATIC_RESOURCE_BASE_URL=http://localhost:8200

# 商品图片上传目录
# 示例: ./uploads/goods(相对路径), /var/www/uploads/goods(绝对路径)
# 💡 结构: ./uploads/goods/2024/01/15/abc123.jpg(按日期分目录)
GOODS_IMAGE_UPLOAD_DIR=./uploads/goods

# 用户头像上传目录
# 示例: ./uploads/avatars
# 💡 结构: ./uploads/avatars/user_123.jpg
USER_AVATAR_UPLOAD_DIR=./uploads/avatars

# 允许上传的图片格式(逗号分隔,小写)
# 推荐值: jpg,jpeg,png,gif,webp
# ⚠️ 安全提示: 不要允许 svg(可能包含恶意脚本!)
IMAGE_ALLOWED_EXTENSIONS=jpg,jpeg,png,gif,webp

# 单张图片最大尺寸(字节)
# 示例: 5242880(5MB), 10485760(10MB)
# 💡 换算: 5MB = 5 × 1024 × 1024 = 5242880 字节
IMAGE_MAX_SIZE=5242880

# 商品图片最大数量(每个商品最多上传几张图)
# 推荐值: 9(九宫格), 5(简洁版), 1(仅主图)
GOODS_MAX_IMAGES=9

# ==================== 前端配置(Vite 需要 VITE_ 前缀) ====================
# 🎨 这些配置是给前端 Vite 项目用的,前端通过 import.meta.env 访问
# ⚠️ 重要: Vite 只会暴露以 VITE_ 开头的环境变量给前端!

# API 基础 URL(前端请求后端接口的地址)
# 示例:
#   - http://localhost:8200(开发环境,直连后端)
#   - https://api.yourdomain.com(生产环境,通过域名访问)
# ⚠️ 注意: 不要加 /api 后缀!OpenAPI 生成的代码已经包含了!
# 💡 前端使用: const response = await fetch(`${import.meta.env.VITE_API_BASE_URL}/api/users`)
VITE_API_BASE_URL=http://localhost:8200

# WebSocket 连接地址(实时通讯用)
# 示例:
#   - ws://localhost:8200/ws(开发环境,HTTP对应WS)
#   - wss://api.yourdomain.com/ws(生产环境,HTTPS对应WSS)
# 💡 用途: 实时消息推送、聊天、通知等
VITE_WS_URL=ws://localhost:8200/ws

# 静态资源基础 URL(前端访问图片用)
# 示例:
#   - http://localhost:8200(开发环境)
#   - https://cdn.yourdomain.com(生产环境,CDN加速)
# 💡 前端使用: <img src={`${import.meta.env.VITE_STATIC_BASE_URL}/uploads/goods/123.jpg`} />
VITE_STATIC_BASE_URL=http://localhost:8200

# 应用标题 - 管理端
# 💡 前端使用: document.title = import.meta.env.VITE_APP_TITLE_ADMIN
VITE_APP_TITLE_ADMIN=校园轻享集市 - 管理端

# 应用标题 - 门户端
VITE_APP_TITLE_PORTAL=校园轻享集市

# 应用描述(用于 SEO)
# 💡 前端使用: <meta name="description" content={import.meta.env.VITE_APP_DESCRIPTION} />
VITE_APP_DESCRIPTION=校园二手交易与社区平台

# 前端开发服务器端口 - 管理端
# 示例: 8210(管理端), 8220(门户端)
# 💡 访问: http://localhost:8210
VITE_ADMIN_PORT=8210

# 前端开发服务器端口 - 门户端
# 💡 访问: http://localhost:8220
VITE_PORTAL_PORT=8220

# ═══════════════════════════════════════════════════════════════════════
# 🎉 恭喜!配置文件全部搞定!
#
# 下一步操作:
# 1. 复制此文件: cp .env.example .env
# 2. 修改 .env 中的敏感信息(密钥、密码等)
# 3. 启动后端: cd backend && ./mvnw spring-boot:run
# 4. 启动前端: cd frontend/packages/portal && pnpm dev
# 5. 打开浏览器: http://localhost:8220
#
# 🚀 祝你开发顺利!有问题随时找 BaSui 😎
# ═══════════════════════════════════════════════════════════════════════
