# 🚀 BaSui 的 Maven 全局优化配置
# 作用：所有 mvn 命令自动应用这些参数（无需每次手敲！）

# ==============================
# 🎯 并行构建配置
# ==============================
# -T 1C：1 个线程/CPU 核心（自动检测）
# 示例：4 核 CPU = 4 个并行线程
#
# ⚠️ 已知问题：Maven 3.9+ 会对 maven-compiler-plugin 报警告：
#    "Parameter 'threads' is unknown for plugin 'maven-compiler-plugin'"
#    这是 Maven 的已知 Bug（MNG-7832），虽然不影响构建但很烦人。
#
# 💡 推荐方案：按需启用并行构建
#    - 🏠 本地开发：默认单线程（稳定优先）
#    - 🚀 大项目/CI：手动启用 mvn clean install -T 1C
#    - 🐛 调试模式：单线程更容易定位问题
#
# 如需默认并行构建，取消下行注释（接受警告）：
# -T 1C

# ==============================
# 🏗️ 构建优化
# ==============================
# 批处理模式（减少交互式输出，加快构建）
# ⚠️ 注意：-B 会禁用颜色输出和进度条，本地开发建议注释掉！
# CI/CD 环境可通过命令行参数 mvn clean install -B 临时启用
# -B

# 启用颜色输出（让终端更炫酷！🎨）
-Dstyle.color=always

# 显示错误堆栈（调试必备！）
-e

# ==============================
# 📦 依赖优化
# ==============================
# 启用增量构建（只编译变更的文件）
-Dmaven.compiler.incremental=true

# 启用依赖并行下载
-Daether.connector.basic.threads=8

# ==============================
# 🧪 测试优化
# ==============================
# Surefire/Failsafe 并行测试（继承 pom.xml 配置）
# 单元测试：多进程并行
# 集成测试：单进程（避免 Testcontainers 冲突）

# ==============================
# 💡 使用建议
# ==============================
# 🚀 快速开发：mvn clean install
# 🧪 跳过测试：mvn clean install -DskipTests
# 🔍 只运行单测：mvn test
# 🔬 只运行集成测试：mvn verify -DskipTests=false -DskipITs=false
# 📊 覆盖率报告：mvn clean verify
# 🐛 调试模式：mvn clean install -X
# 🎯 单线程调试：mvn clean install -T 1

# ==============================
# ⚡ 性能对比（4 核 CPU 示例）
# ==============================
# 单线程（默认）：mvn clean install              → ~60s
# 多线程并行：    mvn clean install -T 1C        → ~25s
# 提升效果：      ~60% 性能提升！🎉
#
# 💡 建议：
#   - 小项目（<100 类）：单线程足够快
#   - 大项目（>500 类）：并行构建显著提速
#   - CI/CD 环境：    建议启用 -T 1C
