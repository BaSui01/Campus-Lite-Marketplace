# Spec #11: 前端门户增强开发 - 任务分解

> **编号**: 11  
> **创建日期**: 2025-11-06  
> **负责人**: BaSui 😎  
> **依赖**: [requirements.md](./requirements.md) | [design.md](./design.md)

---

## 📊 任务概览

| 阶段 | 任务数 | 预计工时 | 开始日期 | 结束日期 |
|------|--------|---------|---------|---------|
| **迭代1: 评价与物流** | 15 | 80小时 | Week 1 | Week 2 |
| **迭代2: 纠纷与黑名单** | 17 | 85小时 | Week 3 | Week 4 |
| **迭代3: 社交功能** | 14 | 70小时 | Week 5 | Week 6 |
| **迭代4: 优化与补充** | 12 | 60小时 | Week 7 | Week 8 |
| **总计** | **58** | **295小时** | - | - |

---

## 🔴 迭代1: 评价与物流 (Week 1-2)

### 阶段目标
✅ 实现评价系统(发布/展示/互动)  
✅ 集成物流信息展示  
✅ 上线推荐功能(个性化/热门榜单)

---

### Task 1.1: 新增 StarRating 组件 ⭐ [P0]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: 无

#### 子任务

- [ ] **1.1.1** 创建组件目录结构 (0.5h)
  ```bash
  frontend/packages/shared/src/components/StarRating/
  ├── index.ts
  ├── StarRating.tsx
  ├── StarRating.test.tsx
  ├── StarRating.stories.tsx
  └── types.ts
  ```

- [ ] **1.1.2** 实现基础星级展示 (2h)
  - 绘制5颗星星SVG
  - 支持0-5分值展示
  - 支持半星显示

- [ ] **1.1.3** 实现可编辑模式 (2h)
  - 鼠标悬停预览
  - 点击选择星级
  - onChange回调

- [ ] **1.1.4** 样式与主题 (1.5h)
  - 尺寸适配(small/medium/large)
  - 颜色自定义
  - 响应式适配

- [ ] **1.1.5** 单元测试 (1.5h)
  - 测试只读模式
  - 测试可编辑模式
  - 测试半星功能

- [ ] **1.1.6** 更新组件导出 (0.5h)
  - 更新 `components/index.ts`
  - 添加 TSDoc 文档

**验收标准**:
- ✅ 支持只读/可编辑两种模式
- ✅ 支持半星显示
- ✅ 测试覆盖率 ≥80%
- ✅ Storybook 文档完整

---

### Task 1.2: 新增 Timeline 组件 📅 [P0]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: 无

#### 子任务

- [ ] **1.2.1** 创建组件目录结构 (0.5h)

- [ ] **1.2.2** 实现垂直时间轴 (3h)
  - 节点连线渲染
  - 时间/标题/描述展示
  - 状态颜色映射

- [ ] **1.2.3** 实现水平时间轴 (2h)
  - 横向布局
  - 响应式适配

- [ ] **1.2.4** 高亮激活节点 (1h)
  - activeIndex 高亮
  - 自动滚动到激活节点

- [ ] **1.2.5** 单元测试 (1.5h)

**验收标准**:
- ✅ 支持垂直/水平两种布局
- ✅ 支持5种状态颜色
- ✅ 测试覆盖率 ≥80%

---

### Task 1.3: 创建 Review 服务层 📡 [P0]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: 无

#### 子任务

- [ ] **1.3.1** 创建服务目录结构 (0.5h)
  ```bash
  frontend/packages/shared/src/services/goods/
  ├── review.ts      # ✅ 新增
  ├── types.ts       # ✅ 补充
  ```

- [ ] **1.3.2** 定义 TypeScript 类型 (1.5h)
  - Review 接口
  - ReviewCreateRequest 接口
  - ReviewListParams 接口
  - ReviewListResponse 接口

- [ ] **1.3.3** 实现 ReviewService (3h)
  - `createReview()` - 发布评价
  - `listReviews()` - 查询评价列表
  - `likeReview()` - 点赞评价
  - `unlikeReview()` - 取消点赞
  - `replyReview()` - 回复评价
  - `uploadReviewMedia()` - 上传图片
  - `getMyReviews()` - 我的评价
  - `deleteReview()` - 删除评价

- [ ] **1.3.4** 单元测试 (1h)

**验收标准**:
- ✅ 8个接口全部实现
- ✅ 类型定义完整
- ✅ 测试覆盖率 ≥85%

---

### Task 1.4: 创建 useReviewStore 状态管理 💾 [P0]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: Task 1.3

#### 子任务

- [ ] **1.4.1** 创建 Store 文件 (0.5h)
  ```bash
  frontend/packages/portal/src/store/useReviewStore.ts
  ```

- [ ] **1.4.2** 定义状态接口 (1h)
  - myReviews: Review[]
  - loading: boolean
  - error: string | null

- [ ] **1.4.3** 实现操作方法 (2h)
  - fetchMyReviews()
  - createReview()
  - deleteReview()
  - likeReview()
  - reset()

- [ ] **1.4.4** 集成 devtools (0.5h)

**验收标准**:
- ✅ 状态管理完整
- ✅ 支持 Redux DevTools

---

### Task 1.5: 实现评价发布页 📝 [P0]

**负责人**: TBD  
**工时**: 12小时  
**依赖**: Task 1.1, Task 1.3, Task 1.4

#### 子任务

- [ ] **1.5.1** 创建页面组件 (1h)
  ```bash
  frontend/packages/portal/src/pages/Review/Create.tsx
  ```

- [ ] **1.5.2** 实现表单UI (3h)
  - 订单商品信息展示
  - 星级评分组件集成
  - 文字评价输入框(10-500字)
  - 字数统计
  - 图片上传组件集成

- [ ] **1.5.3** 表单验证 (2h)
  - 星级必填验证
  - 文字长度验证
  - 图片数量验证(最多9张)
  - 图片大小验证(单张≤5MB)

- [ ] **1.5.4** 提交逻辑 (2h)
  - 调用 reviewService.createReview()
  - 加载状态处理
  - 成功提示跳转

- [ ] **1.5.5** 错误处理 (1.5h)
  - 网络错误提示
  - 表单验证错误提示
  - 重试机制

- [ ] **1.5.6** 响应式适配 (1.5h)
  - 移动端布局
  - Pad端布局

- [ ] **1.5.7** E2E 测试 (1h)

**验收标准**:
- ✅ 表单功能完整
- ✅ 验证逻辑正确
- ✅ 移动端适配良好
- ✅ E2E测试通过

---

### Task 1.6: 商品详情页集成评价展示 🎨 [P0]

**负责人**: TBD  
**工时**: 10小时  
**依赖**: Task 1.1, Task 1.3

#### 子任务

- [ ] **1.6.1** 创建 ReviewCard 组件 (3h)
  ```bash
  frontend/packages/portal/src/components/ReviewCard/
  ├── index.tsx
  ├── ReviewCard.tsx
  └── types.ts
  ```
  - 复用 StarRating 组件
  - 复用 UserAvatar 组件
  - 复用 Badge 组件
  - 评价图片展示

- [ ] **1.6.2** 实现评价列表区块 (3h)
  - Tabs 切换(全部/5星/4星/3星/2星/1星)
  - 排序选择(时间/点赞)
  - 分页加载
  - 空状态展示

- [ ] **1.6.3** 实现点赞功能 (1.5h)
  - 点赞按钮
  - 乐观更新
  - 错误回滚

- [ ] **1.6.4** 实现回复展示 (1.5h)
  - 卖家回复展示
  - 回复时间显示

- [ ] **1.6.5** 响应式适配 (1h)

**验收标准**:
- ✅ 评价列表展示正常
- ✅ 筛选排序功能正常
- ✅ 点赞功能正常
- ✅ 移动端适配良好

---

### Task 1.7: 实现我的评价页 📋 [P0]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 1.4, Task 1.6

#### 子任务

- [ ] **1.7.1** 创建页面组件 (1h)
  ```bash
  frontend/packages/portal/src/pages/Review/MyReviews.tsx
  ```

- [ ] **1.7.2** 实现评价列表 (2h)
  - 使用 ReviewCard 组件
  - 分页加载
  - 空状态展示

- [ ] **1.7.3** 实现编辑功能 (1.5h)
  - 编辑按钮(24小时内可编辑)
  - 编辑表单Modal

- [ ] **1.7.4** 实现删除功能 (1h)
  - 删除按钮
  - 确认弹窗
  - 乐观更新

- [ ] **1.7.5** 响应式适配 (0.5h)

**验收标准**:
- ✅ 列表展示正常
- ✅ 编辑删除功能正常
- ✅ 时间限制生效

---

### Task 1.8: 创建 Logistics 服务层 📡 [P0]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: 无

#### 子任务

- [ ] **1.8.1** 创建服务文件 (0.5h)
  ```bash
  frontend/packages/shared/src/services/order/logistics.ts
  ```

- [ ] **1.8.2** 定义类型 (1h)
  - Logistics 接口
  - LogisticsTrack 接口

- [ ] **1.8.3** 实现 LogisticsService (2h)
  - `getOrderLogistics()` - 查询订单物流
  - `trackLogistics()` - 追踪物流

- [ ] **1.8.4** 单元测试 (0.5h)

**验收标准**:
- ✅ 接口实现完整
- ✅ 测试覆盖率 ≥85%

---

### Task 1.9: 订单详情页集成物流卡片 🚚 [P0]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: Task 1.2, Task 1.8

#### 子任务

- [ ] **1.9.1** 创建 LogisticsCard 组件 (3h)
  ```bash
  frontend/packages/portal/src/components/LogisticsCard/
  ```
  - 物流公司展示
  - 快递单号(可复制)
  - 最新状态展示
  - 展开/收起按钮

- [ ] **1.9.2** 集成 Timeline 组件 (2h)
  - 物流轨迹时间轴
  - 最新状态高亮
  - 空状态处理

- [ ] **1.9.3** 数据加载 (1.5h)
  - useQuery 获取物流信息
  - 加载状态
  - 错误处理

- [ ] **1.9.4** 复制快递单号功能 (0.5h)
  - Clipboard API
  - 复制成功提示

- [ ] **1.9.5** 响应式适配 (1h)

**验收标准**:
- ✅ 物流信息展示完整
- ✅ 时间轴渲染正确
- ✅ 复制功能正常

---

### Task 1.10: 创建 Recommend 服务层 📡 [P0]

**负责人**: TBD  
**工时**: 3小时  
**依赖**: 无

#### 子任务

- [ ] **1.10.1** 创建服务文件 (0.5h)
  ```bash
  frontend/packages/shared/src/services/recommend/recommend.ts
  ```

- [ ] **1.10.2** 定义类型 (0.5h)

- [ ] **1.10.3** 实现 RecommendService (1.5h)
  - `getPersonalRecommend()` - 个性化推荐
  - `getHotList()` - 热门榜单
  - `getSimilarGoods()` - 相似商品

- [ ] **1.10.4** 单元测试 (0.5h)

---

### Task 1.11: 首页集成推荐区块 🏠 [P0]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 1.10

#### 子任务

- [ ] **1.11.1** 实现推荐区块UI (2h)
  - Tabs 切换(为你推荐/热门榜单)
  - 横向滑动容器
  - 使用 GoodsCard 组件

- [ ] **1.11.2** 数据加载 (1.5h)
  - useQuery 获取推荐数据
  - 加载状态
  - 错误处理

- [ ] **1.11.3** 加载更多功能 (1.5h)
  - 滚动到底部加载
  - 加载指示器

- [ ] **1.11.4** 响应式适配 (1h)

**验收标准**:
- ✅ 推荐数据展示正常
- ✅ 加载更多功能正常
- ✅ 移动端适配良好

---

### Task 1.12: 商品详情页集成相似推荐 🎯 [P0]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: Task 1.10

#### 子任务

- [ ] **1.12.1** 实现推荐区块UI (2h)
  - 使用 GoodsCard 组件
  - 网格布局

- [ ] **1.12.2** 数据加载 (1h)
  - useQuery 获取相似商品

- [ ] **1.12.3** 响应式适配 (1h)

---

### Task 1.13: 更新路由配置 🛣️ [P0]

**负责人**: TBD  
**工时**: 2小时  
**依赖**: Task 1.5, Task 1.7

#### 子任务

- [ ] **1.13.1** 新增评价相关路由 (1h)
  - `/orders/:orderNo/review`
  - `/profile/reviews`

- [ ] **1.13.2** 配置路由守卫 (0.5h)

- [ ] **1.13.3** 测试路由跳转 (0.5h)

---

### Task 1.14: 集成测试 🧪 [P0]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: 所有前置任务

#### 子任务

- [ ] **1.14.1** E2E 测试: 评价流程 (3h)
  - 订单完成 → 发布评价
  - 查看评价列表
  - 点赞评价
  - 删除评价

- [ ] **1.14.2** E2E 测试: 物流查看 (1.5h)
  - 订单详情查看物流
  - 复制快递单号

- [ ] **1.14.3** E2E 测试: 推荐功能 (1.5h)
  - 首页推荐展示
  - 相似商品推荐

**验收标准**:
- ✅ 所有E2E测试通过
- ✅ 无严重Bug

---

### Task 1.15: 文档与代码审查 📝 [P0]

**负责人**: TBD  
**工时**: 3小时  
**依赖**: 所有前置任务

#### 子任务

- [ ] **1.15.1** 更新组件文档 (1h)
  - StarRating README
  - Timeline README

- [ ] **1.15.2** 更新 CHANGELOG (0.5h)

- [ ] **1.15.3** 代码审查 (1h)
  - ESLint 检查
  - 组件复用率检查
  - 代码风格检查

- [ ] **1.15.4** 性能测试 (0.5h)
  - Lighthouse 评分

**验收标准**:
- ✅ 文档完整
- ✅ ESLint 无错误
- ✅ 组件复用率 ≥90%
- ✅ Lighthouse 评分 ≥90

---

## 🟡 迭代2: 纠纷与黑名单 (Week 3-4)

### 阶段目标
✅ 实现纠纷处理完整流程  
✅ 实现黑名单管理  
✅ 实现申诉系统

---

### Task 2.1: 新增 FileUploader 组件 📎 [P1]

**负责人**: TBD  
**工时**: 10小时  
**依赖**: 无

#### 子任务

- [ ] **2.1.1** 创建组件目录结构 (0.5h)

- [ ] **2.1.2** 实现文件选择 (2h)
  - input[type=file] 封装
  - accept 类型限制
  - multiple 多选支持

- [ ] **2.1.3** 实现拖拽上传 (2h)
  - DragOver/Drop 事件处理
  - 拖拽区域UI

- [ ] **2.1.4** 实现文件预览 (2h)
  - 图片预览
  - PDF预览
  - 视频预览

- [ ] **2.1.5** 实现上传逻辑 (2h)
  - 上传进度显示
  - 错误处理
  - 重试机制

- [ ] **2.1.6** 实现文件删除 (0.5h)

- [ ] **2.1.7** 单元测试 (1h)

**验收标准**:
- ✅ 支持拖拽上传
- ✅ 支持多种文件类型
- ✅ 进度显示正常
- ✅ 测试覆盖率 ≥80%

---

### Task 2.2: 创建 Dispute 服务层 📡 [P1]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: 无

#### 子任务

- [ ] **2.2.1** 创建服务目录结构 (0.5h)
  ```bash
  frontend/packages/shared/src/services/dispute/
  ├── dispute.ts
  ├── negotiation.ts
  ├── evidence.ts
  ├── arbitration.ts
  ├── types.ts
  └── index.ts
  ```

- [ ] **2.2.2** 定义类型 (2h)
  - Dispute 接口
  - NegotiationRecord 接口
  - Evidence 接口
  - Proposal 接口

- [ ] **2.2.3** 实现 DisputeService (4h)
  - `createDispute()` - 发起纠纷
  - `listMyDisputes()` - 我的纠纷列表
  - `getDisputeDetail()` - 纠纷详情
  - `closeDispute()` - 关闭纠纷
  - `escalateToArbitration()` - 升级仲裁
  - 协商相关接口(5个)
  - 证据相关接口(3个)

- [ ] **2.2.4** 单元测试 (1.5h)

**验收标准**:
- ✅ 接口实现完整(13个接口)
- ✅ 测试覆盖率 ≥85%

---

### Task 2.3: 创建 useDisputeStore 💾 [P1]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: Task 2.2

#### 子任务

- [ ] **2.3.1** 定义状态接口 (1h)

- [ ] **2.3.2** 实现操作方法 (2.5h)
  - fetchDisputes()
  - fetchDisputeDetail()
  - createDispute()
  - sendMessage()
  - uploadEvidence()

- [ ] **2.3.3** 集成 devtools (0.5h)

---

### Task 2.4: 实现纠纷列表页 📋 [P1]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 2.3

#### 子任务

- [ ] **2.4.1** 创建页面组件 (1h)

- [ ] **2.4.2** 实现列表UI (2h)
  - Tabs 切换(协商中/仲裁中/已关闭)
  - 纠纷卡片展示
  - 分页加载

- [ ] **2.4.3** 数据加载 (1.5h)

- [ ] **2.4.4** 状态筛选 (1h)

- [ ] **2.4.5** 响应式适配 (0.5h)

---

### Task 2.5: 实现纠纷详情页 📄 [P1]

**负责人**: TBD  
**工时**: 12小时  
**依赖**: Task 1.2, Task 2.1, Task 2.3

#### 子任务

- [ ] **2.5.1** 创建页面组件 (1h)

- [ ] **2.5.2** 创建 DisputeTimeline 组件 (3h)
  - 复用 Timeline 组件
  - 协商记录渲染
  - 方案卡片渲染
  - 证据展示

- [ ] **2.5.3** 实现纠纷信息区块 (2h)
  - 订单信息
  - 纠纷状态
  - 创建时间

- [ ] **2.5.4** 实现协商功能 (3h)
  - 发送消息输入框
  - 提出方案Modal
  - 响应方案按钮

- [ ] **2.5.5** 实现证据上传 (2h)
  - 使用 FileUploader 组件
  - 证据列表展示

- [ ] **2.5.6** 响应式适配 (1h)

**验收标准**:
- ✅ 纠纷信息展示完整
- ✅ 协商功能正常
- ✅ 证据上传正常

---

### Task 2.6: 订单详情页增加"发起纠纷"入口 🚨 [P1]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 2.3

#### 子任务

- [ ] **2.6.1** 增加"发起纠纷"按钮 (0.5h)

- [ ] **2.6.2** 实现发起纠纷Modal (3h)
  - 纠纷类型选择
  - 纠纷描述输入
  - 证据上传

- [ ] **2.6.3** 表单验证 (1h)

- [ ] **2.6.4** 提交逻辑 (1h)

- [ ] **2.6.5** 权限控制 (0.5h)
  - 已支付且未完成订单可发起

**验收标准**:
- ✅ 按钮展示条件正确
- ✅ Modal功能完整
- ✅ 提交成功后跳转纠纷详情

---

### Task 2.7: 创建 Blacklist 服务层 📡 [P1]

**负责人**: TBD  
**工时**: 3小时  
**依赖**: 无

#### 子任务

- [ ] **2.7.1** 创建服务文件 (0.5h)

- [ ] **2.7.2** 定义类型 (0.5h)

- [ ] **2.7.3** 实现 BlacklistService (1.5h)
  - `blockUser()` - 拉黑用户
  - `unblockUser()` - 解除拉黑
  - `getBlacklist()` - 黑名单列表
  - `isBlocked()` - 检查是否拉黑

- [ ] **2.7.4** 单元测试 (0.5h)

---

### Task 2.8: 创建 useBlacklistStore 💾 [P1]

**负责人**: TBD  
**工时**: 3小时  
**依赖**: Task 2.7

#### 子任务

- [ ] **2.8.1** 定义状态接口 (0.5h)

- [ ] **2.8.2** 实现操作方法 (2h)
  - fetchBlacklist()
  - blockUser()
  - unblockUser()
  - isBlocked()

- [ ] **2.8.3** 集成 devtools (0.5h)

---

### Task 2.9: 实现黑名单管理页 🚫 [P1]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 2.8

#### 子任务

- [ ] **2.9.1** 创建页面组件 (1h)

- [ ] **2.9.2** 实现黑名单列表 (2h)
  - 使用 UserAvatar 组件
  - 拉黑时间展示
  - 分页加载

- [ ] **2.9.3** 实现解除拉黑功能 (1.5h)
  - 解除拉黑按钮
  - 确认Modal
  - 乐观更新

- [ ] **2.9.4** 空状态展示 (0.5h)

- [ ] **2.9.5** 响应式适配 (1h)

**验收标准**:
- ✅ 列表展示正常
- ✅ 解除拉黑功能正常

---

### Task 2.10: 用户主页/私信增加拉黑入口 🔒 [P1]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: Task 2.8

#### 子任务

- [ ] **2.10.1** 用户主页增加拉黑按钮 (1.5h)
  - 按钮UI
  - 确认Modal
  - 拉黑后跳转

- [ ] **2.10.2** 私信界面增加拉黑选项 (1.5h)
  - Dropdown 菜单
  - 拉黑选项

- [ ] **2.10.3** 拉黑后效果 (1h)
  - 私信过滤
  - 商品列表过滤

**验收标准**:
- ✅ 拉黑按钮正常显示
- ✅ 拉黑后私信/商品过滤生效

---

### Task 2.11: 补全 Appeal 服务层 📡 [P1]

**负责人**: TBD  
**工时**: 4小时  
**依赖**: 无

#### 子任务

- [ ] **2.11.1** 补充缺失接口 (2h)
  - `uploadAppealMaterial()` - 上传申诉材料
  - `deleteAppealMaterial()` - 删除材料

- [ ] **2.11.2** 完善类型定义 (1h)

- [ ] **2.11.3** 单元测试 (1h)

---

### Task 2.12: 实现申诉列表页 📋 [P1]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 2.11

#### 子任务

- [ ] **2.12.1** 创建页面组件 (1h)

- [ ] **2.12.2** 实现列表UI (2h)
  - Tabs 切换(待审核/已通过/已拒绝)
  - 申诉卡片展示
  - 分页加载

- [ ] **2.12.3** 数据加载 (1.5h)

- [ ] **2.12.4** 状态筛选 (1h)

- [ ] **2.12.5** 响应式适配 (0.5h)

---

### Task 2.13: 实现提交申诉页 📝 [P1]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: Task 2.1, Task 2.11

#### 子任务

- [ ] **2.13.1** 创建页面组件 (1h)

- [ ] **2.13.2** 实现表单UI (3h)
  - 申诉类型选择
  - 申诉原因输入(100-500字)
  - 证据材料上传(FileUploader)

- [ ] **2.13.3** 表单验证 (1.5h)

- [ ] **2.13.4** 提交逻辑 (1.5h)

- [ ] **2.13.5** 响应式适配 (1h)

**验收标准**:
- ✅ 表单功能完整
- ✅ 验证逻辑正确
- ✅ 提交成功后跳转列表页

---

### Task 2.14: 实现申诉详情页 📄 [P1]

**负责人**: TBD  
**工时**: 6小时  
**依赖**: Task 1.2, Task 2.11

#### 子任务

- [ ] **2.14.1** 创建页面组件 (1h)

- [ ] **2.14.2** 实现申诉信息展示 (2h)
  - 申诉类型、原因
  - 申诉材料列表
  - 申诉状态

- [ ] **2.14.3** 实现审核进度展示 (2h)
  - 使用 Timeline 组件
  - 审核记录时间轴

- [ ] **2.14.4** 取消申诉功能 (0.5h)

- [ ] **2.14.5** 响应式适配 (0.5h)

**验收标准**:
- ✅ 申诉信息展示完整
- ✅ 审核进度时间轴正常

---

### Task 2.15: 更新路由配置 🛣️ [P1]

**负责人**: TBD  
**工时**: 2小时  
**依赖**: 相关页面任务

#### 子任务

- [ ] **2.15.1** 新增纠纷相关路由 (0.5h)
  - `/disputes`
  - `/disputes/:id`

- [ ] **2.15.2** 新增申诉相关路由 (0.5h)
  - `/appeals`
  - `/appeals/create`
  - `/appeals/:id`

- [ ] **2.15.3** 新增设置相关路由 (0.5h)
  - `/settings/blacklist`

- [ ] **2.15.4** 测试路由跳转 (0.5h)

---

### Task 2.16: 集成测试 🧪 [P1]

**负责人**: TBD  
**工时**: 8小时  
**依赖**: 所有前置任务

#### 子任务

- [ ] **2.16.1** E2E 测试: 纠纷流程 (4h)
  - 发起纠纷
  - 协商消息
  - 提出方案
  - 上传证据

- [ ] **2.16.2** E2E 测试: 黑名单功能 (2h)
  - 拉黑用户
  - 私信过滤
  - 解除拉黑

- [ ] **2.16.3** E2E 测试: 申诉流程 (2h)
  - 提交申诉
  - 查看详情
  - 取消申诉

**验收标准**:
- ✅ 所有E2E测试通过

---

### Task 2.17: 文档与代码审查 📝 [P1]

**负责人**: TBD  
**工时**: 2小时  
**依赖**: 所有前置任务

#### 子任务

- [ ] **2.17.1** 更新组件文档 (0.5h)
  - FileUploader README

- [ ] **2.17.2** 更新 CHANGELOG (0.5h)

- [ ] **2.17.3** 代码审查 (0.5h)

- [ ] **2.17.4** 性能测试 (0.5h)

---

## 🟢 迭代3: 社交功能 (Week 5-6)

### 阶段目标
✅ 完善社交功能(回复/话题/关注)  
✅ 实现隐私合规功能  
✅ 实现通知偏好设置

---

### Task 3.1 ~ 3.14: 社交功能任务

包括:
- Reply 服务层与页面
- Topic 服务层与页面
- UserFollow 服务层与页面
- Privacy 服务层与页面
- NotificationPreference 服务层与页面

**详细任务**: 参考迭代1/2模式展开

**总工时**: 70小时

---

## 🔵 迭代4: 优化与补充 (Week 7-8)

### 阶段目标
✅ 商品批量操作  
✅ 订阅管理增强  
✅ 全面测试与优化  
✅ 性能优化与文档完善

---

### Task 4.1 ~ 4.12: 优化任务

包括:
- 商品批量操作
- 订阅管理增强
- 全面集成测试
- 性能优化
- 文档完善

**详细任务**: 参考迭代1/2模式展开

**总工时**: 60小时

---

## 📈 里程碑检查清单

### Milestone 1: 评价与物流 (Week 2 结束)

- [ ] ✅ StarRating 组件上线
- [ ] ✅ Timeline 组件上线
- [ ] ✅ 评价系统完整可用(发布/展示/互动)
- [ ] ✅ 物流信息集成完成
- [ ] ✅ 推荐系统上线
- [ ] ✅ 测试覆盖率 ≥85%
- [ ] ✅ 组件复用率 ≥90%
- [ ] ✅ Lighthouse 评分 ≥90

---

### Milestone 2: 纠纷与黑名单 (Week 4 结束)

- [ ] ✅ FileUploader 组件上线
- [ ] ✅ 纠纷处理流程完整
- [ ] ✅ 黑名单管理可用
- [ ] ✅ 申诉系统上线
- [ ] ✅ 测试覆盖率 ≥85%
- [ ] ✅ 组件复用率 ≥90%

---

### Milestone 3: 社交与隐私 (Week 6 结束)

- [ ] ✅ 回复管理完成
- [ ] ✅ 话题系统完成
- [ ] ✅ 用户关注完成
- [ ] ✅ 隐私合规达标
- [ ] ✅ 通知偏好设置完成
- [ ] ✅ 测试覆盖率 ≥85%

---

### Milestone 4: 全功能完成 (Week 8 结束)

- [ ] ✅ 所有P0-P3任务完成
- [ ] ✅ 接口覆盖率 ≥85% (~145个接口)
- [ ] ✅ 组件复用率 ≥90%
- [ ] ✅ 测试覆盖率 ≥85%
- [ ] ✅ Lighthouse 评分 ≥90
- [ ] ✅ 无P0/P1级别Bug
- [ ] ✅ 文档完整

---

## 📊 工时统计

| 类别 | 工时 | 占比 |
|------|------|------|
| **组件开发** | 60h | 20% |
| **服务层开发** | 50h | 17% |
| **页面开发** | 110h | 37% |
| **测试** | 45h | 15% |
| **文档与审查** | 30h | 11% |
| **总计** | **295h** | **100%** |

---

## 📝 附录

### A. 任务状态标记

- `[ ]` - 待开始
- `[In Progress]` - 进行中
- `[✓]` - 已完成
- `[Blocked]` - 已阻塞
- `[Cancelled]` - 已取消

### B. 优先级说明

- **P0**: 必须完成,影响核心功能
- **P1**: 重要,影响用户体验
- **P2**: 一般,优化体验
- **P3**: 可选,锦上添花

### C. 工时估算说明

- 工时估算基于一名前端工程师的标准工作效率
- 包含开发、自测、Code Review时间
- 不包含正式测试和Bug修复时间
- 实际工时可能因人而异,上下浮动20%

---

**文档版本**: v1.0  
**最后更新**: 2025-11-06  
**维护**: 每周更新任务进度
