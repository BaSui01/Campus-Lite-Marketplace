# Spec #9: 前端管理端完整开发

> **编号范围**: 112-120  
> **创建日期**: 2025-11-05  
> **负责人**: BaSui 😎  
> **状态**: 📝 规划中

---

## 📋 需求概述

基于后端 API（Spec #1-#8）完整开发前端管理端（Admin），实现校园轻享集市系统的后台管理功能。

**目标**：
- 提供完整的后台管理界面
- 实现商品、订单、申诉、纠纷等核心业务管理
- 支持批量操作、数据审核、统计分析等高级功能
- 遵循 TDD 开发流程，测试覆盖率 ≥85%

**前置条件**：
- 后端 API 已实现（Spec #1-#8）
- 前端基础架构已完成（认证、路由、权限、HTTP 客户端）
- 共享层组件库已就绪（@campus/shared）

**技术栈**：
- React 18 + TypeScript 5 + Vite 5
- Ant Design 5 + ECharts 5
- Zustand + TanStack Query
- 参考：[docs/specs/tech.md](../tech.md)

---

## 🎯 功能需求

### 需求 112：商品管理模块 ⚡ P0

**用户故事**：
> 作为管理员，我需要管理平台上的商品，包括商品列表查询、商品审核、商品详情查看和批量操作，以确保商品信息的规范性和合规性。

**功能点**：

#### 1. 商品列表页 (`/admin/goods/list`)
- **分页查询**：支持 20 条/页分页查询
- **关键词搜索**：支持按商品标题、描述搜索
- **高级筛选**：
  - 分类筛选（电子产品、图书、服装等）
  - 价格区间筛选（最低价-最高价）
  - 状态筛选（全部、待审核、已上架、已下架）
  - 标签筛选（多选）
- **批量操作**：
  - 批量上架（勾选商品 → 点击上架）
  - 批量下架（勾选商品 → 点击下架）
  - 批量删除（勾选商品 → 确认删除）
- **单项操作**：
  - 查看详情（跳转详情页）
  - 编辑商品（弹窗编辑）
  - 上下架切换（状态切换）
  - 删除商品（二次确认）

#### 2. 商品审核页 (`/admin/content/goods`)
- **待审核列表**：仅显示状态为 "待审核" 的商品
- **审核表单**：
  - 批准按钮（一键通过）
  - 拒绝按钮（弹窗填写拒绝原因）
  - 审核意见输入框（选填）
- **批量审核**：
  - 勾选多个商品 → 批量批准/拒绝
  - 显示审核成功数/失败数
- **审核历史**：查看商品的历史审核记录

#### 3. 商品详情页 (`/admin/goods/:id`)
- **基本信息**：
  - 商品标题、描述、价格、库存
  - 商品分类、标签
  - 商品状态（待审核/已上架/已下架）
  - 创建时间、更新时间
- **图片展示**：
  - 商品图片轮播（最多 10 张）
  - 图片放大查看
- **卖家信息**：
  - 用户名、头像、联系方式
  - 信用评分、成交量
- **审核记录**：
  - 审核时间、审核人、审核结果、审核意见
  - 时间线展示
- **操作按钮**：
  - 审核（批准/拒绝）
  - 上下架切换
  - 编辑商品
  - 删除商品

**后端 API**：
- `GET /api/goods` - 商品列表查询
- `GET /api/goods/pending` - 待审核商品列表
- `GET /api/goods/{id}` - 商品详情
- `POST /api/goods/{id}/approve` - 审核商品
- `PUT /api/goods/{id}/status` - 商品上下架
- `DELETE /api/goods/{id}` - 删除商品
- `POST /api/goods/batch` - 批量操作

**验收标准**：
- ✅ 商品列表支持分页、搜索、筛选
- ✅ 商品审核支持批准/拒绝，可填写审核意见
- ✅ 商品详情展示完整信息
- ✅ 批量操作支持上下架、删除
- ✅ 权限控制：`SYSTEM_GOODS_VIEW` 查看，`SYSTEM_GOODS_APPROVE` 审核
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 商品列表加载时间 <500ms
- 商品详情加载时间 <300ms
- 图片懒加载，减少首屏加载时间
- 批量操作支持最多 100 个商品

---

### 需求 113：订单管理模块 ⚡ P0

**用户故事**：
> 作为管理员，我需要管理平台上的订单和退款，包括订单列表查询、订单详情查看、订单取消和退款审核，以确保交易的顺利进行。

**功能点**：

#### 1. 订单列表页 (`/admin/orders/list`)
- **分页查询**：支持 20 条/页分页查询
- **搜索功能**：
  - 订单号搜索（精确匹配）
  - 商品名搜索（模糊匹配）
  - 买家/卖家搜索（用户名）
- **状态筛选**：
  - 全部订单
  - 待支付（PENDING_PAYMENT）
  - 已支付（PAID）
  - 已发货（SHIPPED）
  - 已完成（COMPLETED）
  - 已取消（CANCELLED）
  - 退款中（REFUNDING）
  - 已退款（REFUNDED）
- **时间筛选**：
  - 今日、近7天、近30天、自定义时间范围
- **订单表格**：
  - 订单号、商品（标题+图片）、买家、卖家、金额、状态、创建时间
  - 操作列：查看详情、取消订单（仅待支付/已支付）
- **统计卡片**：
  - 总订单数、待支付订单数、已完成订单数、退款中订单数

#### 2. 订单详情页 (`/admin/orders/:id`)
- **订单信息卡片**：
  - 订单号、订单状态、创建时间、更新时间
- **商品信息卡片**：
  - 商品图片（缩略图）、商品标题、商品价格、数量
  - 点击跳转商品详情页
- **买家信息卡片**：
  - 用户名、头像、联系方式
  - 收货地址（如果有）
- **卖家信息卡片**：
  - 用户名、头像、联系方式
- **支付信息卡片**：
  - 支付方式（支付宝/微信支付）
  - 支付金额、支付时间、交易流水号
- **物流信息卡片**：
  - 物流公司、运单号、物流状态
  - 物流轨迹时间线（如果有）
- **订单状态时间线**：
  - 创建订单 → 支付订单 → 发货 → 确认收货 → 完成
  - 每个节点显示时间
- **操作按钮**：
  - 取消订单（仅待支付/已支付）
  - 强制完成（仅已发货）
  - 查看退款（如果有退款）

#### 3. 退款管理页 (`/admin/orders/refunds`)
- **退款列表**：
  - 退款单号、订单号、商品、退款金额、退款原因、状态、申请时间
  - 状态：待审核、已批准、已拒绝、已完成
- **退款审核**：
  - 查看退款详情（订单信息、退款原因、凭证图片）
  - 审核表单：批准/拒绝、审核意见
- **批量审核**：支持批量批准/拒绝退款

**后端 API**：
- `GET /api/orders` - 订单列表（管理员视角）
- `GET /api/orders/{orderNo}` - 订单详情
- `POST /api/orders/{orderNo}/cancel` - 取消订单
- `GET /api/refunds` - 退款列表
- `GET /api/refunds/{refundId}` - 退款详情
- `POST /api/refunds/{refundId}/approve` - 退款审核
- `GET /api/logistics/{orderNo}` - 物流详情（集成）

**验收标准**：
- ✅ 订单列表支持分页、搜索、多状态筛选
- ✅ 订单详情展示完整信息（商品、买卖家、支付、物流）
- ✅ 订单状态时间线清晰展示流程
- ✅ 退款审核支持批准/拒绝
- ✅ 权限控制：`SYSTEM_ORDER_VIEW` 查看，`SYSTEM_ORDER_MANAGE` 操作
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 订单列表加载时间 <500ms
- 订单详情加载时间 <300ms
- 支持实时查询物流信息
- 退款审核响应时间 <1s

---

### 需求 114：申诉管理模块 ⚡ P1

**用户故事**：
> 作为管理员，我需要处理用户的申诉请求，包括申诉列表查询、申诉详情查看和申诉审核，以确保用户权益得到保障。

**功能点**：

#### 1. 申诉列表页 (`/admin/appeals/list`)
- **分页查询**：支持 20 条/页分页查询
- **状态筛选**：
  - 全部、待审核、审核中、已批准、已拒绝、已过期
- **类型筛选**：
  - 封禁申诉（ACCOUNT_BAN）
  - 商品申诉（GOODS_REJECTION）
  - 订单申诉（ORDER_DISPUTE）
  - 其他申诉（OTHER）
- **搜索功能**：
  - 申诉ID搜索
  - 用户名搜索
- **申诉表格**：
  - 申诉ID、类型、状态、用户、创建时间、过期时间
  - 操作列：查看详情、审核（仅待审核）
- **统计卡片**：
  - 总申诉数、待审核数、已批准数、已拒绝数

#### 2. 申诉详情页 (`/admin/appeals/:id`)
- **申诉基本信息**：
  - 申诉ID、类型、状态、创建时间、过期时间
- **申诉人信息**：
  - 用户名、头像、联系方式
  - 用户信用评分、历史申诉次数
- **申诉内容**：
  - 申诉标题
  - 申诉详细描述
  - 申诉材料（图片、文件）- 支持预览和下载
- **关联信息**：
  - 如果是封禁申诉：显示封禁记录（原因、时长、操作人）
  - 如果是商品申诉：显示商品信息（标题、审核记录）
  - 如果是订单申诉：显示订单信息（订单号、状态）
- **审核表单**：
  - 批准按钮（申诉通过，解除封禁/恢复商品等）
  - 拒绝按钮（申诉不通过，维持原决定）
  - 审核意见输入框（必填，200字以内）
- **审核历史**：
  - 如果该申诉被多次审核，显示历史记录

#### 3. 批量审核功能
- **批量选择**：勾选多个待审核申诉
- **批量批准**：一键批准选中的申诉
- **批量拒绝**：一键拒绝选中的申诉（需填写统一拒绝原因）
- **批量结果**：显示成功数/失败数，失败原因

**后端 API**：
- `GET /api/admin/appeals` - 申诉列表
- `GET /api/admin/appeals/{id}` - 申诉详情
- `GET /api/admin/appeals/pending` - 待审核申诉
- `POST /api/admin/appeals/{id}/review` - 审核申诉
- `POST /api/admin/appeals/batch-review` - 批量审核
- `GET /api/admin/appeals/statistics` - 申诉统计
- `GET /api/appeals/materials/{appealId}` - 申诉材料

**验收标准**：
- ✅ 申诉列表支持分页、状态筛选、类型筛选
- ✅ 申诉详情展示完整信息（用户、内容、材料、关联信息）
- ✅ 申诉审核支持批准/拒绝，必须填写审核意见
- ✅ 批量审核功能正常，显示操作结果
- ✅ 权限控制：`SYSTEM_USER_APPEAL_HANDLE` 审核权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 申诉列表加载时间 <500ms
- 申诉详情加载时间 <300ms
- 申诉材料图片支持懒加载
- 批量审核最多支持 50 个申诉

---

### 需求 115：纠纷仲裁模块 ⚡ P1

**用户故事**：
> 作为管理员/仲裁员，我需要处理买卖双方的交易纠纷，通过查看证据、协商记录来做出公正的仲裁决策，以维护平台交易秩序。

**功能点**：

#### 1. 纠纷列表页 (`/admin/disputes/list`)
- **分页查询**：支持 20 条/页分页查询
- **状态筛选**：
  - 全部、协商中（NEGOTIATING）、待仲裁（PENDING_ARBITRATION）、仲裁中（ARBITRATING）、已完成（COMPLETED）
- **类型筛选**：
  - 商品问题（PRODUCT_ISSUE）
  - 服务问题（SERVICE_ISSUE）
  - 物流问题（LOGISTICS_ISSUE）
  - 其他（OTHER）
- **搜索功能**：
  - 纠纷ID搜索
  - 订单号搜索
- **纠纷表格**：
  - 纠纷ID、订单号、类型、状态、提交人、创建时间、仲裁员
  - 操作列：查看详情、分配仲裁员、仲裁（仅待仲裁/仲裁中）
- **统计卡片**：
  - 总纠纷数、协商中数、待仲裁数、今日完成数

#### 2. 纠纷详情页 (`/admin/disputes/:id`)
- **纠纷基本信息**：
  - 纠纷ID、类型、状态、创建时间、更新时间
  - 当前阶段（协商期48h / 待仲裁 / 仲裁期7天）
  - 仲裁员信息（姓名、工号）
- **订单信息卡片**：
  - 订单号、商品（标题+图片+价格）
  - 买家、卖家信息
  - 订单状态
- **买家申诉卡片**：
  - 申诉内容、申诉时间
  - 诉求（退款/退货/赔偿）
- **卖家回复卡片**：
  - 回复内容、回复时间
  - 卖家态度（同意/拒绝/协商）
- **证据材料卡片**：
  - 买家证据（图片、文件）
  - 卖家证据（图片、文件）
  - 证据哈希验证状态（防篡改）
  - 证据元数据（上传时间、文件大小、文件类型）
- **协商记录时间线**：
  - 买家 → 卖家 → 买家... 的消息往来
  - 每条消息显示发送人、内容、时间
- **仲裁决策区域**（仅仲裁员可见）：
  - 仲裁结果选择：
    - 支持买家（BUYER_WIN）
    - 支持卖家（SELLER_WIN）
    - 部分支持（PARTIAL_WIN）
  - 仲裁理由输入框（必填，500字以内）
  - 处理措施选择（退款/退货/赔偿/无需处理）
  - 提交仲裁决定按钮

#### 3. 证据管理页 (`/admin/disputes/:id/evidence`)
- **证据列表**：
  - 证据ID、提交人（买家/卖家）、类型（图片/文件）、上传时间、哈希值
- **证据详情**：
  - 图片预览（大图查看）
  - 文件下载
  - 哈希验证结果（绿色✓已验证 / 红色✗验证失败）
- **证据上传**（管理员补充证据）：
  - 支持图片上传（最多10张）
  - 支持文件上传（PDF、Word等）

#### 4. 纠纷统计页 (`/admin/disputes/statistics`)
- **纠纷趋势图**（折线图）：
  - 按月统计纠纷数量（最近12个月）
  - 按日统计纠纷数量（最近30天）
- **仲裁结果分析**（饼图）：
  - 支持买家比例
  - 支持卖家比例
  - 部分支持比例
- **纠纷类型分布**（饼图）：
  - 商品问题占比
  - 服务问题占比
  - 物流问题占比
  - 其他问题占比
- **仲裁员绩效统计**（表格）：
  - 仲裁员姓名、处理案件数、平均处理时长、满意度评分

**后端 API**：
- `GET /api/disputes` - 纠纷列表
- `GET /api/disputes/{id}` - 纠纷详情
- `POST /api/disputes/{disputeId}/arbitrations/assign` - 分配仲裁员
- `POST /api/disputes/arbitrations` - 提交仲裁决定
- `GET /api/disputes/{id}/negotiations` - 协商记录
- `GET /api/disputes/evidence/{disputeId}` - 证据列表
- `POST /api/disputes/evidence` - 上传证据
- `GET /api/disputes/statistics/trend` - 纠纷趋势
- `GET /api/disputes/statistics/arbitration-result` - 仲裁结果分析
- `GET /api/disputes/statistics/type-distribution` - 类型分布

**验收标准**：
- ✅ 纠纷列表支持分页、状态筛选、类型筛选
- ✅ 纠纷详情展示完整信息（订单、买卖家、证据、协商记录）
- ✅ 仲裁决策支持三种结果（支持买家/支持卖家/部分支持）
- ✅ 证据哈希验证功能正常
- ✅ 纠纷统计图表正确展示数据
- ✅ 权限控制：`ROLE_ADMIN` 仲裁权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 纠纷列表加载时间 <500ms
- 纠纷详情加载时间 <300ms
- 证据图片支持懒加载
- 协商记录支持分页加载（每次加载20条）
- 统计图表加载时间 <1s

---

### 需求 116：评价管理模块 ⚡ P1

**用户故事**：
> 作为管理员，我需要管理平台上的商品评价，包括评价列表查询、评价详情查看和违规评价审核，以维护评价系统的公正性。

**功能点**：

#### 1. 评价列表页 (`/admin/reviews/list`)
- **分页查询**：支持 20 条/页分页查询
- **评分筛选**：
  - 全部、5星、4星、3星、2星、1星
- **状态筛选**：
  - 全部、正常（NORMAL）、违规（VIOLATED）、已删除（DELETED）
- **关键词搜索**：
  - 评价内容搜索（模糊匹配）
  - 商品名搜索
  - 用户名搜索
- **评价表格**：
  - 评价ID、商品、用户、评分（星级显示）、评价内容（截断）、状态、时间
  - 操作列：查看详情、审核、删除
- **统计卡片**：
  - 总评价数、平均评分、违规评价数、待审核数

#### 2. 评价详情页 (`/admin/reviews/:id`)
- **评价基本信息**：
  - 评价ID、评分（星级显示）、状态、创建时间
- **商品信息**：
  - 商品标题、图片、价格
  - 点击跳转商品详情页
- **用户信息**：
  - 用户名、头像、信用评分
  - 历史评价数、平均评分
- **评价内容**：
  - 评价文字内容（全文显示）
  - 评价图片（最多10张）- 图片轮播展示
  - 评价视频（最多1个）- 视频播放器
- **回复列表**：
  - 卖家回复（如果有）：回复内容、回复时间
  - 管理员回复（如果有）：回复内容、回复时间、回复人
  - 追评（如果有）：追评内容、追评时间
- **互动数据**：
  - 点赞数、举报数
  - 点赞用户列表（弹窗展示）
  - 举报原因列表（弹窗展示）
- **审核操作**：
  - 标记违规按钮（标记为违规评价，隐藏显示）
  - 删除评价按钮（软删除，可恢复）
  - 审核意见输入框（选填）

#### 3. 评价审核页 (`/admin/reviews/:id/review`)
- **违规类型选择**：
  - 广告信息
  - 辱骂攻击
  - 虚假评价
  - 敏感内容
  - 其他违规
- **审核意见**：填写审核意见（必填，200字以内）
- **审核操作**：
  - 标记违规（隐藏评价）
  - 删除评价（软删除）
  - 忽略举报（维持正常状态）

**后端 API**：
- `GET /api/reviews` - 评价列表（管理员视角）
- `GET /api/reviews/{id}` - 评价详情
- `GET /api/reviews/{reviewId}/media` - 评价图片视频
- `GET /api/reviews/{reviewId}/replies` - 评价回复列表
- `POST /api/reviews/{id}/review` - 审核评价
- `PUT /api/reviews/{id}/status` - 更新评价状态
- `DELETE /api/reviews/{id}` - 删除评价
- `GET /api/reviews/statistics` - 评价统计

**验收标准**：
- ✅ 评价列表支持分页、评分筛选、状态筛选、关键词搜索
- ✅ 评价详情展示完整信息（用户、商品、内容、图片视频、回复、互动）
- ✅ 评价审核支持标记违规、删除、忽略举报
- ✅ 评价图片视频正常加载和播放
- ✅ 权限控制：`SYSTEM_REVIEW_MANAGE` 审核权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 评价列表加载时间 <500ms
- 评价详情加载时间 <300ms
- 评价图片支持懒加载
- 视频播放支持清晰度切换
- 评价审核响应时间 <1s

---

### 需求 117：批量操作管理模块 ⚡ P1

**用户故事**：
> 作为管理员，我需要执行批量操作任务（商品上下架、价格调整、库存更新、用户通知），并实时监控任务进度，以提高运营效率。

**功能点**：

#### 1. 批量任务列表页 (`/admin/batch/tasks`)
- **分页查询**：支持 20 条/页分页查询
- **状态筛选**：
  - 全部、待执行（PENDING）、执行中（RUNNING）、已完成（COMPLETED）、已失败（FAILED）
- **类型筛选**：
  - 商品上下架（GOODS_STATUS_UPDATE）
  - 价格批量调整（PRICE_BATCH_UPDATE）
  - 库存批量更新（STOCK_BATCH_UPDATE）
  - 用户批量通知（USER_NOTIFICATION）
- **任务表格**：
  - 任务ID、类型、状态、进度（百分比+进度条）、创建时间、完成时间
  - 操作列：查看进度、取消任务（仅待执行/执行中）、删除任务（仅已完成/已失败）
- **统计卡片**：
  - 总任务数、执行中任务数、今日完成数、今日失败数

#### 2. 任务进度监控页 (`/admin/batch/tasks/:id`)
- **任务基本信息**：
  - 任务ID、类型、状态、创建时间、开始时间、完成时间
- **进度展示**：
  - 进度条（动态更新）
  - 总数、成功数、失败数、剩余数
  - 进度百分比（成功率）
- **实时刷新**：
  - 每3秒自动刷新一次进度
  - 支持手动刷新按钮
- **任务日志**（表格）：
  - 日志时间、操作类型、目标ID、结果（成功/失败）、失败原因
  - 支持按结果筛选（成功/失败）
  - 支持导出日志（CSV/Excel）
- **操作按钮**：
  - 取消任务（仅执行中）
  - 重试失败项（仅已失败的项）
  - 下载日志（导出Excel）

#### 3. 批量任务创建页 (`/admin/batch/create`)
- **任务类型选择**（单选）：
  - 商品上下架
  - 价格批量调整
  - 库存批量更新
  - 用户批量通知
- **目标选择方式**（根据任务类型动态表单）：
  - **方式1：手动输入ID**
    - 文本框输入（每行一个ID，或逗号分隔）
    - 支持批量粘贴
  - **方式2：文件上传**
    - 上传Excel/CSV文件（第一列为ID）
    - 支持模板下载
  - **方式3：条件筛选**（高级）
    - 商品筛选：分类、价格区间、状态、标签
    - 用户筛选：角色、校区、注册时间
- **任务参数配置**（根据任务类型动态表单）：
  - **商品上下架**：目标状态（上架/下架）
  - **价格调整**：调整方式（增加/减少/设置为固定值）、调整金额
  - **库存更新**：调整方式（增加/减少/设置为固定值）、调整数量
  - **用户通知**：通知标题、通知内容、通知渠道（站内/邮件/短信）
- **任务预览**：
  - 显示目标数量
  - 显示预览列表（前10条）
  - 显示预估执行时间
- **提交创建**：点击创建按钮，跳转任务进度页

**后端 API**：
- `GET /api/batch/tasks` - 任务列表
- `GET /api/batch/tasks/{id}` - 任务详情
- `GET /api/batch/tasks/{id}/progress` - 任务进度（轮询）
- `GET /api/batch/tasks/{id}/logs` - 任务日志
- `POST /api/batch/tasks` - 创建任务
- `POST /api/batch/tasks/{id}/cancel` - 取消任务
- `POST /api/batch/tasks/{id}/retry` - 重试失败项
- `DELETE /api/batch/tasks/{id}` - 删除任务

**验收标准**：
- ✅ 批量任务列表支持分页、状态筛选、类型筛选
- ✅ 任务进度实时刷新（每3秒）
- ✅ 任务日志支持查看和导出
- ✅ 批量任务创建支持三种目标选择方式
- ✅ 权限控制：`SYSTEM_BATCH_OPERATION` 批量操作权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 任务列表加载时间 <500ms
- 任务进度查询响应时间 <200ms
- 支持最多1000个目标的批量操作
- 任务创建后立即返回任务ID
- 任务日志导出支持最多10000条记录

---

### 需求 118：日志管理模块 ⚡ P2

**用户故事**：
> 作为管理员，我需要查看平台的审计日志和操作日志，以追踪系统操作记录和异常行为。

**功能点**：

#### 1. 审计日志页 (`/admin/logs/audit`)
- **分页查询**：支持 20 条/页分页查询
- **时间范围筛选**：
  - 今日、近7天、近30天、自定义时间范围（日期选择器）
- **操作类型筛选**：
  - 全部、登录登出、用户管理、商品管理、订单管理、审核操作、批量操作、系统配置
- **用户筛选**：
  - 输入用户名搜索
- **日志表格**：
  - 日志ID、操作人、操作类型、操作内容、IP地址、时间
  - 操作列：查看详情（弹窗展示完整日志）
- **导出功能**：
  - 导出当前筛选结果为CSV/Excel
  - 导出全部日志（限制最多10000条）

#### 2. 操作日志页 (`/admin/logs/operation`)
- **分页查询**：支持 20 条/页分页查询
- **日志级别筛选**：
  - 全部、INFO、WARN、ERROR
- **日志表格**：
  - 日志时间、级别、模块、消息内容
  - 异常日志高亮显示（ERROR级别红色背景）
- **搜索功能**：
  - 关键词搜索（模糊匹配消息内容）

**后端 API**：
- `GET /api/audit-logs` - 审计日志查询
- `GET /api/audit-logs/{id}` - 审计日志详情
- `GET /api/exports/audit-logs` - 导出审计日志
- `GET /api/system-logs` - 操作日志查询（假设后端提供）

**验收标准**：
- ✅ 审计日志支持时间范围、操作类型、用户筛选
- ✅ 日志导出功能正常（CSV/Excel）
- ✅ 操作日志支持日志级别筛选
- ✅ 异常日志高亮显示
- ✅ 权限控制：`SYSTEM_AUDIT_VIEW` 审计日志权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 日志列表加载时间 <500ms
- 日志导出时间 <3s（1000条以内）
- 支持最多查询近90天的日志

---

### 需求 119：封禁记录管理 ⚡ P2

**用户故事**：
> 作为管理员，我需要查看用户封禁记录，并支持解封操作，以管理用户账号状态。

**功能点**：

#### 1. 封禁记录页 (`/admin/users/banned`)
- **分页查询**：支持 20 条/页分页查询
- **状态筛选**：
  - 全部、封禁中（ACTIVE）、已解封（UNBANNED）
- **用户搜索**：
  - 用户名搜索
- **封禁表格**：
  - 用户名、头像、封禁原因、封禁时长（天数）、操作人、封禁时间、解封时间
  - 操作列：解封（仅封禁中）
- **统计卡片**：
  - 总封禁数、封禁中用户数、今日解封数

#### 2. 解封操作
- **解封弹窗**：
  - 显示用户信息（用户名、头像）
  - 显示封禁记录（原因、时长）
  - 解封原因输入框（必填，200字以内）
  - 确认解封按钮
- **解封结果**：
  - 成功提示：用户已解封
  - 失败提示：显示失败原因

**后端 API**：
- `GET /api/users/banned` - 封禁记录查询
- `POST /api/users/{id}/unban` - 解封用户
- `GET /api/users/{id}/ban-history` - 用户封禁历史

**验收标准**：
- ✅ 封禁记录支持分页、状态筛选、用户搜索
- ✅ 解封操作需填写解封原因
- ✅ 解封后更新记录状态
- ✅ 权限控制：`SYSTEM_USER_BAN` 封禁管理权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 封禁记录加载时间 <500ms
- 解封操作响应时间 <1s

---

### 需求 120：帖子审核管理 ⚡ P2

**用户故事**：
> 作为管理员，我需要审核用户发布的帖子，以确保社区内容的合规性。

**功能点**：

#### 1. 帖子审核页 (`/admin/content/posts`)
- **分页查询**：支持 20 条/页分页查询
- **状态筛选**：
  - 全部、待审核（PENDING）、已发布（PUBLISHED）、已拒绝（REJECTED）
- **帖子表格**：
  - 帖子ID、标题、作者、发布时间、状态
  - 操作列：查看详情、审核（仅待审核）
- **统计卡片**：
  - 总帖子数、待审核数、已发布数、已拒绝数

#### 2. 帖子详情与审核
- **帖子详情弹窗**：
  - 帖子标题、内容、图片
  - 作者信息（用户名、头像）
  - 发布时间
- **审核表单**：
  - 批准按钮（审核通过，发布帖子）
  - 拒绝按钮（审核不通过，填写拒绝原因）
  - 审核意见输入框（选填）

**后端 API**：
- `GET /api/posts` - 帖子列表（管理员视角）
- `GET /api/posts/pending` - 待审核帖子
- `GET /api/posts/{id}` - 帖子详情
- `POST /api/posts/{id}/approve` - 审核帖子

**验收标准**：
- ✅ 帖子列表支持分页、状态筛选
- ✅ 帖子详情展示完整信息
- ✅ 帖子审核支持批准/拒绝
- ✅ 权限控制：`SYSTEM_POST_APPROVE` 审核权限
- ✅ 测试覆盖率 ≥85%

**非功能需求**：
- 帖子列表加载时间 <500ms
- 帖子详情加载时间 <300ms
- 帖子审核响应时间 <1s

---

## 📊 需求总结

| 需求编号 | 功能模块 | 优先级 | 工作量（天） | 依赖Specs |
|---------|---------|--------|------------|-----------|
| 112 | 商品管理 | P0 | 3 | Spec #1, #4 |
| 113 | 订单管理 | P0 | 3 | Spec #1, #2, #8 |
| 114 | 申诉管理 | P1 | 2 | Spec #3 |
| 115 | 纠纷仲裁 | P1 | 4 | Spec #6 |
| 116 | 评价管理 | P1 | 3 | Spec #7 |
| 117 | 批量操作 | P1 | 3 | Spec #4 |
| 118 | 日志管理 | P2 | 1 | Spec #1 |
| 119 | 封禁记录 | P2 | 1 | Spec #1 |
| 120 | 帖子审核 | P2 | 1 | Spec #1 |

**总计**：9个功能模块，21天工作量

---

## ✅ 验收标准（全局）

### 功能性验收
- ✅ 9个功能模块全部实现
- ✅ 所有页面支持响应式布局（1920x1080, 1366x768）
- ✅ 所有表格支持分页、搜索、筛选
- ✅ 所有表单支持校验和错误提示
- ✅ 所有弹窗支持ESC关闭

### 性能验收
- ✅ 首屏加载时间 <2s
- ✅ 页面切换时间 <500ms
- ✅ API响应时间 <300ms（P95）
- ✅ 图片懒加载，减少首屏加载时间

### 质量验收
- ✅ 测试覆盖率 ≥85%
- ✅ TypeScript无错误（0 errors）
- ✅ ESLint无警告（0 warnings）
- ✅ 组件复用率 ≥70%

### 安全验收
- ✅ 所有页面需权限验证
- ✅ 所有API请求需Token认证
- ✅ XSS防护（输入转义）
- ✅ CSRF防护（Token验证）

### 兼容性验收
- ✅ Chrome 90+
- ✅ Edge 90+
- ✅ Firefox 90+

---

## 📖 参考文档

- [技术栈规范](../tech.md)
- [项目结构规范](../structure.md)
- [前端管理端分析报告](../../FRONTEND_ADMIN_ANALYSIS.md)
- [Spec #1: 基础架构](../1/requirements.md)
- [Spec #2: 后端扩展](../2/requirements.md)
- [Spec #3: 用户申诉系统](../3/requirements.md)
- [Spec #4: 批量操作系统](../4/requirements.md)
- [Spec #5: 数据撤销系统](../5/requirements.md)
- [Spec #6: 纠纷仲裁系统](../6/requirements.md)
- [Spec #7: 评价系统完善](../7/requirements.md)
- [Spec #8: 用户体验全面提升](../8/requirements.md)

---

**文档版本**: v1.0  
**创建日期**: 2025-11-05  
**作者**: BaSui 😎
