# 前端门户开发 - 功能需求

> **编号**: Spec-001  
> **功能**: 校园轻享集市 - 用户端门户  
> **作者**: BaSui 😎  
> **日期**: 2025-11-05  
> **状态**: 📋 需求分析阶段

---

## 📋 概述

### 项目背景

校园轻享集市是一个专为大学生打造的二手交易与社区平台，用户端门户是学生日常使用的主要入口，需要提供简洁、流畅、响应式的用户体验。

### 业务目标

- 🎯 **核心目标**: 让学生能快速浏览、发布、交易二手商品
- 📱 **体验目标**: PC和移动端完美适配，流畅无卡顿
- 🔐 **安全目标**: 完善的权限控制，保护用户隐私
- ⚡ **性能目标**: 首屏加载<2秒，API响应<200ms

### 技术栈

**参考**: [docs/specs/tech.md](../tech.md) - 完整技术栈说明

核心技术：
- React 18 + TypeScript 5
- Vite 5 + pnpm Monorepo
- TanStack React Query + Zustand
- Tailwind CSS

### 项目结构

**参考**: [docs/specs/structure.md](../structure.md) - 完整项目结构

```
frontend/packages/portal/
├── src/
│   ├── pages/       # 页面组件
│   ├── components/  # UI组件
│   ├── hooks/       # 自定义Hooks
│   ├── store/       # Zustand状态
│   └── router/      # 路由配置
```

### 用户角色

| 角色 | 说明 | 权限 |
|------|------|------|
| **游客** | 未登录用户 | 浏览首页、商品列表、商品详情、社区帖子 |
| **普通用户** | 已登录学生 | 游客权限 + 发布商品、下单购买、聊天、发帖、收藏 |
| **认证用户** | 完成学生认证 | 普通用户权限 + 所有交易功能 |

---

## 📖 功能需求

### 1. 认证授权模块 🔐

#### 1.1 用户注册

**用户故事**:
> 作为新用户，我希望能快速注册账号，以便开始使用平台功能。

**验收标准**:
- ✅ 支持用户名+密码注册
- ✅ 邮箱验证码验证
- ✅ 手机号验证码验证（可选）
- ✅ 学生认证（上传学生证）
- ✅ 校区选择（自动定位或手动选择）
- ✅ 表单实时验证（用户名唯一性、密码强度）
- ✅ 滑块验证（防机器人）

**业务规则**:
- 用户名：3-20字符，字母数字下划线
- 密码：6-20字符，建议包含大小写字母和数字
- 邮箱：必须是有效的教育邮箱（.edu后缀优先）
- 手机号：中国大陆手机号
- 验证码：6位数字，5分钟有效，1分钟限发1次

#### 1.2 用户登录 ✅ **已完成**

**用户故事**:
> 作为已注册用户，我希望能快速登录，以便访问我的个人信息和订单。

**验收标准**:
- ✅ 支持用户名/邮箱/手机号登录
- ✅ 密码登录
- ✅ 记住我功能（7天免登录）
- ✅ 找回密码（邮箱/短信）
- ✅ **登录后跳转到原页面（redirect参数）** ✅
- ✅ **401自动跳转登录并保存原路径** ✅

**实现文档**: [docs/specs/AUTH_REDIRECT.md](../AUTH_REDIRECT.md)

**业务规则**:
- 连续5次密码错误，锁定账号30分钟
- Token有效期24小时
- Refresh Token有效期7天

---

### 2. 首页模块 🏠

#### 2.1 Hero区域

**用户故事**:
> 作为访客，我希望在首页看到吸引人的轮播图和平台介绍，以便快速了解平台功能。

**验收标准**:
- ✅ 轮播图（3-5张，自动轮播）
- ✅ 平台Slogan和介绍
- ✅ 全局搜索框
- ✅ 主要功能入口（发布、搜索、分类）
- ✅ 响应式设计（PC/Mobile不同布局）

**UI设计要求**:
- 轮播图高度：PC 400px，Mobile 200px
- 自动轮播间隔：5秒
- 支持手势滑动（Mobile）

#### 2.2 热门商品

**用户故事**:
> 作为用户，我希望在首页看到热门商品，以便快速发现感兴趣的内容。

**验收标准**:
- ✅ 展示12个热门商品（按浏览量排序）
- ✅ 商品卡片：图片、标题、价格、浏览量、收藏数
- ✅ 点击跳转到商品详情
- ✅ 懒加载（滚动到底部自动加载更多）
- ✅ 骨架屏Loading效果

**业务规则**:
- 热门商品每小时刷新一次
- 只展示"ON_SALE"状态的商品
- 按浏览量降序排列
- 图片使用CDN加速

**API调用**:
```typescript
api.listGoods({
  page: 0,
  size: 12,
  sortBy: 'viewCount',
  sortOrder: 'DESC'
})
```

#### 2.3 分类导航

**用户故事**:
> 作为用户，我希望能快速找到特定分类的商品，以便节省浏览时间。

**验收标准**:
- ✅ 一级分类展示（图标+文字）
- ✅ 点击跳转到分类商品列表
- ✅ 分类商品数量显示
- ✅ 响应式网格布局

---

### 3. 商品模块 🛍️

#### 3.1 商品列表

**用户故事**:
> 作为用户，我希望能浏览所有商品，并通过筛选和排序快速找到想要的商品。

**验收标准**:
- ✅ 商品网格展示（响应式：PC 4列，Tablet 3列，Mobile 2列）
- ✅ 筛选功能：
  - 分类（多选）
  - 价格区间（滑块选择）
  - 校区（单选）
  - 商品状态（全新、几乎全新、轻微使用痕迹等）
- ✅ 排序功能：
  - 最新发布（默认）
  - 价格升序
  - 价格降序
  - 浏览量降序
- ✅ 分页加载（支持滚动加载和翻页两种模式）
- ✅ 空状态展示（暂无商品）
- ✅ 筛选条件持久化（URL参数）

**业务规则**:
- 每页20个商品
- 默认按最新发布排序
- 只展示当前校区的商品（可切换到全部校区）
- 筛选条件保存到URL，支持分享链接

**性能要求**:
- 图片懒加载
- 虚拟滚动（长列表优化）
- 防抖搜索（500ms）

#### 3.2 商品详情

**用户故事**:
> 作为买家，我希望看到商品的详细信息，以便决定是否购买。

**验收标准**:
- ✅ 图片画廊（支持缩放、切换、全屏、手势滑动）
- ✅ 商品基本信息：
  - 标题、价格、成色、数量、分类
  - 发布时间、浏览量、收藏数
  - 详细描述（支持Markdown）
- ✅ 卖家信息卡片：
  - 头像、昵称、校区、评分
  - 在线状态（绿点）
  - 关注按钮
  - 查看主页按钮
- ✅ 操作按钮：
  - 立即购买（主按钮）
  - 加入收藏（次按钮）
  - 联系卖家（聊天图标）
  - 分享（复制链接）
  - 举报（更多菜单）
- ✅ 相似推荐（同类商品，4个）
- ✅ 浏览记录（本地存储，最多50条）

**业务规则**:
- 已售出商品：不显示"立即购买"，显示"已售出"标签
- 自己的商品：显示"编辑"和"下架"按钮，不显示购买
- 浏览量实时更新（进入页面+1）
- 图片加载失败显示占位图

**SEO优化**:
- 动态设置页面title和description
- Open Graph标签（社交分享）

#### 3.3 发布商品

**用户故事**:
> 作为卖家，我希望能快速发布商品，以便出售闲置物品。

**验收标准**:
- ✅ 多步骤表单（3步）：
  1. 上传图片（最多9张）
  2. 填写基本信息
  3. 确认发布
- ✅ 图片上传：
  - 拖拽上传
  - 点击上传
  - 图片裁剪（可选）
  - 拖拽排序
  - 删除图片
  - 进度显示
- ✅ 基本信息：
  - 标题（必填，5-50字符）
  - 分类（必填，级联选择）
  - 价格（必填，0.01-99999元）
  - 成色（必填，下拉选择）
  - 数量（必填，默认1）
  - 描述（必填，10-1000字符，支持Markdown）
  - 位置（必填，校区+楼栋）
- ✅ 表单验证：
  - 实时验证（失焦时）
  - 错误提示（字段下方）
  - 必填项标记（红色星号）
- ✅ 草稿保存：
  - 自动保存（每30秒）
  - 本地存储
  - 恢复草稿提示
- ✅ 发布成功：
  - 提示信息
  - 跳转到商品详情

**业务规则**:
- 图片：每张<5MB，支持jpg/jpeg/png/gif/webp
- 标题：不能包含联系方式（手机号、微信号）
- 价格：支持小数点后2位
- 需要登录且完成学生认证才能发布

**权限控制**:
```typescript
// 未登录：跳转登录
// 已登录但未认证：提示完成学生认证
// 已认证：可以发布
```

#### 3.4 编辑商品

**验收标准**:
- ✅ 复用发布商品组件
- ✅ 表单回填已有数据
- ✅ 保存修改

**业务规则**:
- 只能编辑自己发布的商品
- 已售出的商品不能编辑
- 修改后需要重新审核（如果有审核机制）

#### 3.5 我的商品

**用户故事**:
> 作为卖家，我希望能管理我发布的商品，以便编辑、下架或删除。

**验收标准**:
- ✅ Tab切换：
  - 出售中
  - 已售出
  - 已下架
- ✅ 商品卡片（简化版）
- ✅ 操作按钮：
  - 编辑
  - 下架/上架
  - 删除（二次确认）
  - 分享
- ✅ 批量操作：
  - 全选/取消全选
  - 批量下架
  - 批量删除
- ✅ 商品统计：
  - 浏览量趋势图（ECharts）
  - 收藏数
  - 询问数

---

### 4. 订单模块 📦

#### 4.1 下单购买

**用户故事**:
> 作为买家，我希望能快速下单购买商品，以便完成交易。

**验收标准**:
- ✅ 确认订单页面：
  - 商品信息（图片、标题、价格、数量）
  - 收货地址（默认地址，可切换）
  - 支付方式（支付宝、微信）
  - 买家留言（可选）
  - 订单金额（商品价格+运费）
- ✅ 提交订单：
  - 创建订单
  - 跳转支付页面
  - 支付倒计时（15分钟）

**业务规则**:
- 商品必须是"ON_SALE"状态
- 不能购买自己的商品
- 创建订单后15分钟内必须支付，否则自动取消
- 运费计算规则（根据校区）

#### 4.2 订单列表

**用户故事**:
> 作为买家，我希望能查看我的所有订单，以便跟踪订单状态。

**验收标准**:
- ✅ Tab切换：
  - 全部
  - 待支付
  - 待发货
  - 待收货
  - 已完成
  - 已取消/退款
- ✅ 订单卡片展示：
  - 订单号、创建时间
  - 商品信息（图片、标题、价格、数量）
  - 订单状态（标签）
  - 操作按钮（根据状态动态显示）
- ✅ 操作按钮：
  - 待支付：去支付、取消订单
  - 待发货：提醒发货、申请退款
  - 待收货：确认收货、查看物流、申请退款
  - 已完成：评价、再次购买
  - 已取消：删除订单
- ✅ 订单搜索（订单号、商品名称）
- ✅ 订单筛选（时间范围）

#### 4.3 订单详情

**用户故事**:
> 作为买家/卖家，我希望看到订单的详细信息，以便了解交易进度。

**验收标准**:
- ✅ 订单信息：
  - 订单号、创建时间、支付时间、发货时间、完成时间
  - 订单状态（时间轴展示）
- ✅ 商品信息：
  - 图片、标题、价格、数量
  - 总价、运费
- ✅ 物流信息：
  - 物流公司、运单号
  - 物流追踪（第三方API）
  - 物流时间轴
- ✅ 买卖双方信息：
  - 买家信息（卖家视角）
  - 卖家信息（买家视角）
  - 收货地址（买家视角）
- ✅ 操作按钮（根据角色和状态动态显示）

**业务规则**:
- 买家7天后自动确认收货
- 确认收货后可以评价（15天内有效）

---

### 5. 社区模块 💬

#### 5.1 社区首页

**用户故事**:
> 作为用户，我希望能浏览社区帖子，以便了解校园动态和交流经验。

**验收标准**:
- ✅ 布局选择（列表模式/瀑布流模式）
- ✅ 帖子卡片：
  - 封面图（如果有）
  - 标题、摘要
  - 作者信息（头像、昵称）
  - 话题标签
  - 互动数据（点赞数、评论数、分享数）
  - 发布时间
- ✅ 话题标签：
  - 热门话题（Top 10）
  - 推荐话题
  - 关注的话题
- ✅ 筛选功能：
  - 话题筛选（单选）
  - 时间筛选（最新、本周、本月）
  - 热度筛选（最热、精华）
- ✅ 发帖按钮（浮动按钮）

#### 5.2 帖子详情

**用户故事**:
> 作为用户，我希望能查看帖子的详细内容和评论，以便参与讨论。

**验收标准**:
- ✅ 帖子内容：
  - 标题
  - 正文（支持Markdown、图片、视频）
  - 发布时间、浏览量
- ✅ 作者信息：
  - 头像、昵称、校区
  - 关注按钮
  - 举报按钮
- ✅ 互动按钮：
  - 点赞（点赞数）
  - 收藏（收藏数）
  - 分享（复制链接、生成海报）
  - 评论（评论数）
- ✅ 评论列表：
  - 评论内容
  - 评论者信息
  - 评论时间
  - 点赞评论
  - 回复评论（二级评论）
  - 评论排序（按热度/按时间）
- ✅ 评论输入框：
  - 富文本编辑（Markdown）
  - 表情选择器
  - @用户（提及）
  - 图片上传
  - 发布评论

#### 5.3 发布帖子

**验收标准**:
- ✅ 标题（必填，5-50字符）
- ✅ 内容（必填，Markdown编辑器）
- ✅ 图片上传（最多9张）
- ✅ 话题选择（最多3个）
- ✅ 发布/保存草稿

---

### 6. 个人中心模块 👤

#### 6.1 个人主页

**用户故事**:
> 作为用户，我希望能查看和编辑我的个人信息，以便管理账号。

**验收标准**:
- ✅ 用户信息展示：
  - 头像（支持点击放大）
  - 昵称、签名
  - 校区、学校
  - 注册时间、最后登录
- ✅ 统计数据卡片：
  - 发布商品数
  - 卖出商品数
  - 买入商品数
  - 发布帖子数
  - 关注数/粉丝数
- ✅ 信用评分：
  - 卖家评分（5星）
  - 买家评分（5星）
  - 评价数量
- ✅ 操作按钮：
  - 编辑资料
  - 账号设置
  - 退出登录

#### 6.2 编辑资料

**验收标准**:
- ✅ 头像上传（裁剪、预览）
- ✅ 昵称（3-20字符）
- ✅ 签名（最多50字符）
- ✅ 性别（男/女/保密）
- ✅ 生日（可选）
- ✅ 校区/学校

#### 6.3 账号设置

**验收标准**:
- ✅ 修改密码
- ✅ 绑定邮箱/手机号
- ✅ 隐私设置（谁可以看我的主页、商品）
- ✅ 通知设置（系统通知、交易通知、互动通知）
- ✅ 注销账号（二次确认）

#### 6.4 我的收藏

**用户故事**:
> 作为用户，我希望能收藏感兴趣的商品/帖子，以便后续查看。

**验收标准**:
- ✅ Tab切换（商品收藏/帖子收藏）
- ✅ 收藏列表（网格/列表模式）
- ✅ 取消收藏
- ✅ 批量取消收藏
- ✅ 商品状态显示（已售出、已下架）

#### 6.5 浏览历史

**用户故事**:
> 作为用户，我希望能查看我的浏览历史，以便找回之前看过的商品。

**验收标准**:
- ✅ 浏览历史列表（按时间倒序）
- ✅ 清除历史（全部清除/单条删除）
- ✅ 跳转到商品详情
- ✅ 本地存储（最多保留100条）

#### 6.6 关注/粉丝

**验收标准**:
- ✅ Tab切换（我的关注/我的粉丝）
- ✅ 用户卡片（头像、昵称、签名）
- ✅ 取消关注/关注回粉
- ✅ 查看用户主页

---

### 7. 搜索模块 🔍

#### 7.1 全局搜索

**用户故事**:
> 作为用户，我希望能快速搜索到想要的商品/帖子，以便节省浏览时间。

**验收标准**:
- ✅ 搜索框（Header固定）：
  - 占位符提示
  - 搜索图标
  - 清空按钮
- ✅ 搜索建议：
  - 实时提示（防抖500ms）
  - 高亮关键词
  - 搜索历史
  - 热门搜索
  - 最多10条建议
- ✅ 搜索结果页：
  - Tab切换（商品/帖子/用户）
  - 搜索结果列表
  - 高亮关键词
  - 筛选和排序
  - 空状态提示
- ✅ 搜索历史：
  - 本地存储（最多20条）
  - 点击历史重新搜索
  - 清空历史

**业务规则**:
- 关键词最少2个字符
- 搜索建议走API（模糊搜索）
- 搜索历史本地存储

---

### 8. 通知消息模块 🔔

#### 8.1 系统通知

**用户故事**:
> 作为用户，我希望能收到订单、交易、系统等相关通知，以便及时处理。

**验收标准**:
- ✅ 通知中心（页面）：
  - Tab切换（全部/系统/交易/互动）
  - 通知列表
  - 未读标记（红点/数字）
  - 通知时间（今天、昨天、更早）
- ✅ 通知卡片：
  - 通知图标
  - 通知标题
  - 通知内容（摘要）
  - 通知时间
  - 已读/未读状态
- ✅ 操作：
  - 点击通知跳转到相关页面
  - 标记已读/未读
  - 全部已读
  - 删除通知

#### 8.2 Header通知铃铛

**验收标准**:
- ✅ 未读数量显示（红点Badge）
- ✅ 点击下拉通知列表（最新5条）
- ✅ 查看全部（跳转通知中心）

#### 8.3 实时消息（WebSocket）

**用户故事**:
> 作为用户，我希望能实时收到新消息通知，以便快速响应。

**验收标准**:
- ✅ WebSocket连接：
  - 自动连接（登录后）
  - 断线自动重连（指数退避）
  - 心跳保活
- ✅ 消息推送：
  - 订单状态变更
  - 新评论/回复
  - 新聊天消息
  - 系统公告
- ✅ 浏览器通知：
  - 请求通知权限
  - 桌面通知（标题+内容+图标）
  - 点击通知跳转
- ✅ 消息铃铛动画（摇铃）

---

### 9. 聊天模块 💬

#### 9.1 聊天列表

**用户故事**:
> 作为用户，我希望能查看我的所有聊天会话，以便快速找到想要的对话。

**验收标准**:
- ✅ 会话列表：
  - 对方头像、昵称
  - 最后一条消息（文本/图片/商品卡片）
  - 发送时间（今天显示时分，更早显示日期）
  - 未读数（红色Badge）
  - 在线状态（绿点）
- ✅ 会话排序（按最新消息时间降序）
- ✅ 搜索会话（用户昵称）
- ✅ 删除会话（滑动删除）
- ✅ 空状态提示

#### 9.2 聊天窗口

**用户故事**:
> 作为买家，我希望能与卖家实时聊天，以便询问商品详情和议价。

**验收标准**:
- ✅ Header：
  - 对方头像、昵称
  - 在线状态
  - 更多菜单（清空聊天记录、举报）
- ✅ 消息列表：
  - 消息气泡（左右布局）
  - 消息类型（文本/图片/商品卡片）
  - 发送时间（超过5分钟显示）
  - 发送状态（发送中/已发送/失败）
  - 已读/未读状态（双勾）
- ✅ 输入区域：
  - 文本输入框（多行，自动扩展）
  - 表情按钮（表情选择器）
  - 图片按钮（上传图片）
  - 商品按钮（插入商品卡片）
  - 发送按钮
- ✅ 快捷回复：
  - 常用语列表（"在吗"、"还在吗"、"价格可以商量吗"）
  - 点击快速发送
- ✅ 实时消息（WebSocket）：
  - 发送消息
  - 接收消息
  - 消息已读回执
  - 对方正在输入提示

**业务规则**:
- 消息本地缓存（IndexedDB）
- 图片压缩后发送（<1MB）
- 商品卡片只能插入自己的商品

---

### 10. 其他功能

#### 10.1 举报

**用户故事**:
> 作为用户，我希望能举报违规商品/用户/帖子，以便维护平台环境。

**验收标准**:
- ✅ 举报弹窗：
  - 举报对象（商品/用户/帖子）
  - 举报原因（单选）：
    - 违禁品（毒品、枪支等）
    - 虚假信息
    - 侵权盗版
    - 色情低俗
    - 诈骗信息
    - 其他
  - 补充说明（可选，最多200字符）
  - 上传凭证（可选，最多3张图片）
- ✅ 提交举报
- ✅ 举报成功提示

#### 10.2 退款售后

**用户故事**:
> 作为买家，我希望能申请退款，以便在商品有问题时保护我的权益。

**验收标准**:
- ✅ 申请退款：
  - 退款原因（单选）：
    - 未收到货
    - 商品与描述不符
    - 商品有质量问题
    - 不想要了
    - 其他
  - 退款金额（默认订单金额）
  - 退款说明（必填，10-200字符）
  - 上传凭证（可选，最多9张图片）
- ✅ 退款列表：
  - 退款单卡片
  - 退款状态（待处理/卖家同意/卖家拒绝/退款成功/退款失败）
- ✅ 退款详情：
  - 退款信息
  - 退款进度（时间轴）
  - 协商记录（聊天）
  - 操作按钮（撤销申请/修改申请）

---

## 🎯 非功能需求

### 性能需求

| 指标 | 目标值 | 测量方法 |
|------|--------|---------|
| **首屏加载** | <2秒 | Lighthouse |
| **白屏时间** | <1秒 | Performance API |
| **API响应** | <200ms | Chrome DevTools |
| **页面切换** | <300ms | 用户感知 |
| **图片加载** | <1秒 | LazyLoad |

**优化策略**:
- 代码分割（React.lazy）
- 路由懒加载
- 图片懒加载（Intersection Observer）
- CDN加速（图片、静态资源）
- 虚拟滚动（长列表）
- 预加载（关键资源）
- 缓存策略（React Query + Service Worker）

### 兼容性需求

| 类型 | 要求 |
|------|------|
| **浏览器** | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| **移动端** | iOS 13+, Android 8+ |
| **响应式** | PC (≥1024px), Tablet (768-1023px), Mobile (<768px) |

### 可用性需求

- ✅ 键盘快捷键（回车提交、ESC关闭弹窗、Ctrl+K搜索）
- ✅ 无障碍支持（ARIA标签、语义化HTML）
- ✅ 加载状态（骨架屏、Loading动画、进度条）
- ✅ 错误处理（友好的错误信息、重试按钮）
- ✅ 表单验证（实时反馈、错误提示）
- ✅ 操作反馈（Toast提示、确认对话框）

### 安全需求

- ✅ XSS防护（输入过滤、输出转义）
- ✅ CSRF防护（Token验证）
- ✅ 敏感信息脱敏（手机号、身份证）
- ✅ HTTPS传输（生产环境）
- ✅ 内容安全策略（CSP）

---

## 📋 验收标准总览

### 功能完整性

- [ ] 所有页面已实现（20+页面）
- [ ] 所有API已对接（252个接口）
- [ ] 所有交互已完成（50+交互场景）
- [ ] 所有错误已处理（网络错误、业务错误、异常情况）

### 质量标准

- [ ] 单元测试覆盖率 ≥80%
- [ ] 集成测试通过率 100%
- [ ] 无TypeScript类型错误
- [ ] 无ESLint警告
- [ ] 通过Lighthouse审计（性能≥90分、无障碍≥90分）

### 用户体验

- [ ] 流畅无卡顿（60fps）
- [ ] 加载状态友好（骨架屏、进度条）
- [ ] 错误提示清晰（具体原因、解决方案）
- [ ] 移动端适配完美（触摸友好、响应式）
- [ ] 操作反馈及时（Toast、动画）

### 浏览器兼容

- [ ] Chrome测试通过
- [ ] Firefox测试通过
- [ ] Safari测试通过
- [ ] Edge测试通过
- [ ] 移动端Safari/Chrome测试通过

---

---

## 📦 共享层资源清单

**重要**: 开发前必须检查共享层资源，避免重复开发！

### Services层（17个业务服务）⭐⭐⭐

**优先使用Services而不是直接调用API！**

```typescript
import {
  authService,      // 认证服务（登录、注册、登出）
  goodsService,     // 商品服务（列表、详情、创建、更新）
  orderService,     // 订单服务（创建、列表、详情、状态更新）
  postService,      // 帖子服务（创建、列表、详情、评论）
  messageService,   // 消息服务（发送、接收、会话列表）
  refundService,    // 退款服务（申请、列表、详情）
  uploadService,    // 上传服务（图片上传、进度跟踪）
  userService,      // 用户服务（资料、关注、粉丝）
  reportService     // 举报服务（举报商品、用户、帖子）
} from '@campus/shared/services';
```

### Hooks层（15个自定义Hook）⭐⭐

```typescript
import {
  useAuth,          // 认证Hook（登录状态、Token管理）
  usePagination,    // 分页Hook（页码、每页条数）
  useDebounce,      // 防抖Hook（搜索输入）
  useThrottle,      // 节流Hook（滚动事件）
  useLocalStorage,  // LocalStorage Hook
  useWebSocket,     // WebSocket Hook（自动重连）
  useUpload,        // 上传Hook（进度、多文件）
  useChatMessage,   // 聊天消息Hook（WebSocket订阅）
  useNotification,  // 通知Hook（WebSocket订阅）
  useOrderUpdate,   // 订单更新Hook（WebSocket订阅）
  useAuthGuard      // 权限守卫Hook（未登录提示）
} from '@campus/shared/hooks';
```

### Components层（24个组件）⭐⭐⭐

**基础组件**:
```typescript
import {
  Button,           // 按钮组件
  Input,            // 输入框组件
  Select,           // 选择器组件
  Modal,            // 模态框组件
  Loading,          // 加载组件
  Skeleton,         // 骨架屏组件
  Empty,            // 空状态组件
  Toast,            // 提示组件
  Form,             // 表单组件
  Pagination,       // 分页组件
  Card,             // 卡片组件
  Tabs,             // 标签页组件
  Badge,            // 徽标组件
  Avatar,           // 头像组件
  Tag               // 标签组件
} from '@campus/shared/components';
```

**业务组件**:
```typescript
import {
  GoodsCard,        // 商品卡片组件 ⭐⭐⭐
  OrderCard,        // 订单卡片组件 ⭐⭐⭐
  UserAvatar,       // 用户头像组件（带在线状态）
  ImageUpload,      // 图片上传组件 ⭐⭐⭐
  RichTextEditor    // 富文本编辑器 ⭐⭐⭐
} from '@campus/shared/components';
```

### Utils层（8个工具函数）

```typescript
import {
  apiClient,        // Axios实例（已配置拦截器）
  format,           // 格式化工具（日期、价格、手机号）
  validator,        // 验证工具（邮箱、手机号、身份证）
  storage,          // LocalStorage封装
  websocket         // WebSocket封装
} from '@campus/shared/utils';
```

### 使用示例

**Services示例**:
```typescript
// ✅ 推荐：使用Services（更简洁）
import { goodsService } from '@campus/shared/services';
const goods = await goodsService.getList({ page: 0, size: 20 });

// ❌ 不推荐：直接使用API（繁琐）
import { DefaultApi } from '@campus/shared/api';
const api = new DefaultApi();
const response = await api.listGoods({ page: 0, size: 20 });
const goods = response.data.data || [];
```

**Hooks示例**:
```typescript
// ✅ 使用已有Hooks
import { usePagination, useDebounce } from '@campus/shared/hooks';

const { page, size, changePage } = usePagination();
const debouncedValue = useDebounce(searchValue, 500);
```

**Components示例**:
```typescript
// ✅ 使用已有组件
import { GoodsCard, ImageUpload, Loading } from '@campus/shared/components';

<GoodsCard data={goods} onClick={handleClick} />
<ImageUpload maxCount={9} onUpload={handleUpload} />
<Loading size="large" />
```

**详细文档**: [共享层使用分析](./SHARED_LAYER_USAGE.md)

---

## 🔗 相关文档

- [技术栈规范](../tech.md)
- [项目结构规范](../structure.md)
- [技术设计文档](./design-frontend.md)
- [任务分解计划](./tasks-frontend.md)
- [共享层使用分析](./SHARED_LAYER_USAGE.md) ⭐ 必读
- [前端架构解析](../../FRONTEND_ARCHITECTURE.md)
- [快速上手指南](../../FRONTEND_QUICKSTART.md)
- [登录重定向实现](../AUTH_REDIRECT.md)

---

**最后更新**: 2025-11-05  
**维护者**: BaSui 😎  
**状态**: 📋 待审批（已更新：充分利用共享层）
