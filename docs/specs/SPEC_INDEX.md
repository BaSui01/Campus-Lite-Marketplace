# Specs 需求索引 - 全局编号分配器

> **项目**: 校园轻享集市系统
> **作者**: BaSui 😎
> **最后更新**: 2025-11-02
> **下一个可用编号**: 86

---

## 🎯 使用说明

**本文件的作用**：
- 🔢 **全局编号分配** - 防止需求编号重复
- 📋 **需求追踪** - 记录所有 Spec 的需求范围
- 🗑️ **废弃管理** - 记录已废弃的需求编号（不重用）

**使用流程**：
1. 创建新 Spec 前，先读本文件获取"下一个可用编号"
2. 分配编号范围后，更新"需求编号分配记录"表
3. 完成需求编写后，更新"下一个可用编号"

---

## 📊 需求编号分配记录

| 编号范围 | Spec 编号 | 功能模块         | 状态      | 需求数 | 创建日期   | 负责人 |
|---------|----------|-----------------|----------|--------|-----------|-------|
| 1-52    | #1       | 基础架构 + 核心业务 | ✅ 已完成 | 52     | 2025-10-25 | BaSui |
| 53-68   | #2       | 后端扩展         | 🚧 开发中 | 16     | 2025-10-27 | BaSui |
| 69-73   | #3       | 用户申诉系统     | 📝 规划中 | 5      | 2025-11-02 | BaSui |
| 74-79   | #4       | 批量操作系统     | 📝 规划中 | 6      | 2025-11-02 | BaSui |
| 80-85   | #5       | 数据撤销系统     | 📝 规划中 | 6      | 2025-11-02 | BaSui |

---

## 🔍 Spec 详情

### Spec #1: 基础架构 + 核心业务

**编号范围**: 1-52
**文件路径**: [docs/specs/1/](../docs/specs/1/)
**状态**: ✅ 已完成
**创建日期**: 2025-10-25

**包含功能模块**：

#### 架构基础（需求 1-15）
- 需求 1: 分层架构设计
- 需求 2: 用户认证与授权
- 需求 3: RBAC 权限模型
- 需求 4: 数据持久化
- 需求 5: 缓存策略
- 需求 6: 统一 API 响应格式
- 需求 7: 事务管理
- 需求 8: 依赖注入
- 需求 9: 参数校验
- 需求 10: 日志记录
- 需求 11: 异常处理
- 需求 12: RESTful API 设计
- 需求 13: 代码质量
- 需求 14: 测试驱动开发
- 需求 15: 包结构设计

#### 用户管理（需求 16-18）
- 需求 16: 用户注册
- 需求 17: 用户登录
- 需求 18: 用户资料管理

#### 物品管理（需求 19-22）
- 需求 19: 物品发布
- 需求 20: 物品审核
- 需求 21: 物品查询
- 需求 22: 物品详情

#### 订单管理（需求 23-25）
- 需求 23: 订单创建
- 需求 24: 订单支付
- 需求 25: 订单评价

#### 论坛功能（需求 26-27）
- 需求 26: 论坛发帖
- 需求 27: 论坛回复

#### 系统管理（需求 28-30）
- 需求 28: 用户封禁
- 需求 29: 系统配置管理
- 需求 30: 审计日志

#### 非功能性需求（需求 31-33）
- 需求 31: 系统性能要求
- 需求 32: 系统安全要求
- 需求 33: 系统可用性要求

#### 支付与通知（需求 34-38）
- 需求 34: 微信支付集成（黑盒模式）
- 需求 35: 微信支付集成（白盒模式）
- 需求 36: 支付宝支付集成
- 需求 37: 消息通知系统
- 需求 38: 文件上传功能

#### 扩展功能（需求 39-42）
- 需求 39: 物品收藏功能
- 需求 40: 内容举报功能
- 需求 41: 用户积分系统
- 需求 42: 优惠券系统

#### 即时通讯（需求 43-52）
- 需求 43: 私信会话管理
- 需求 44: 私信消息发送
- 需求 45: 实时消息推送（WebSocket）
- 需求 46: 消息已读状态
- 需求 47: 消息历史记录
- 需求 48: 消息撤回功能
- 需求 49: 消息搜索功能
- 需求 50: 消息通知提醒
- 需求 51: 黑名单功能
- 需求 52: 快捷回复功能

---

### Spec #2: 后端扩展

**编号范围**: 53-68
**文件路径**: [docs/specs/2/](../docs/specs/2/)
**状态**: 🚧 开发中
**创建日期**: 2025-10-27

**说明**：
- 本 Spec 已完成需求/设计/任务规划（三件套已就绪）
- 涵盖多校区、FTS 搜索、推荐榜单、售后退款、限流、导出、任务框架、Feature Flags、i18n、可观测、分类标签、关注订阅、隐私合规

---

### Spec #3: 用户申诉系统

**编号范围**: 69-73
**文件路径**: [docs/specs/3/](../docs/specs/3/)
**状态**: ✅ 规划完成
**创建日期**: 2025-11-02

**包含功能模块**：
- 需求 69: 申诉提交功能
- 需求 70: 申诉状态查询
- 需求 71: 管理员申诉处理
- 需求 72: 申诉材料管理
- 需求 73: 申诉统计分析

**规划文档**：
- [requirements.md](3/requirements.md) ✅ 用户故事 + 验收标准 + 非功能需求
- [design.md](3/design.md) ✅ 系统架构 + 组件设计 + API设计 + 性能优化
- [tasks.md](3/tasks.md) ✅ 10个开发任务 + _Prompt执行指导

**开发任务**：10个TDD任务，每个包含详细实施指导

---

### Spec #4: 批量操作系统

**编号范围**: 74-79
**文件路径**: [docs/specs/4/](../docs/specs/4/)
**状态**: ✅ 规划完成
**创建日期**: 2025-11-02

**包含功能模块**：
- 需求 74: 商品批量上下架
- 需求 75: 价格批量调整
- 需求 76: 库存批量更新
- 需求 77: 批量用户通知
- 需求 78: 批量操作监控和日志
- 需求 79: 批量操作权限控制

**规划文档**：
- [requirements.md](4/requirements.md) ✅ 用户故事 + 验收标准 + 非功能需求
- [design.md](4/design.md) ✅ 架构设计 + 分片处理 + 异步执行 + 监控告警
- [tasks.md](4/tasks.md) ✅ 9个开发任务 + _Prompt执行指导

**开发任务**：9个TDD任务，包含架构、处理器、API、性能优化、部署运维

---

### Spec #5: 数据撤销系统

**编号范围**: 80-85
**文件路径**: [docs/specs/5/](../docs/specs/5/)
**状态**: ✅ 规划完成
**创建日期**: 2025-11-02

**包含功能模块**：
- 需求 80: 商品操作撤销
- 需求 81: 订单状态撤销
- 需求 82: 用户操作撤销
- 需求 83: 批量操作撤销
- 需求 84: 数据版本回滚
- 需求 85: 撤销权限控制

**规划文档**：
- [requirements.md](5/requirements.md) ✅ 用户故事 + 验收标准 + 非功能需求
- [design.md](5/design.md) ✅ 策略模式 + 审计集成 + 数据备份 + 安全保障
- [tasks.md](5/tasks.md) ✅ 10个开发任务 + _Prompt执行指导

**开发任务**：10个TDD任务，包含审计扩展、策略实现、安全控制、系统回滚

---

## 🗑️ 已废弃需求

> **说明**：已废弃的需求编号**不可重用**，保留在此记录中

| 编号 | 原功能描述 | 废弃原因 | 废弃日期 | 操作人 |
|-----|-----------|---------|---------|-------|
| -   | -         | -       | -       | -     |

**当前无废弃需求**

---

## 📋 编号分配流程（重要！）

### 创建新 Spec 时

1️⃣ **读取本文件**
```
下一个可用编号 = 53
```

2️⃣ **规划需求范围**
```
假设新 Spec 包含 10 个需求
分配编号范围：53-62
```

3️⃣ **更新分配记录**
```markdown
| 53-62   | #2       | 数据导出 | 🚧 开发中 | 10     | 2025-10-27 | BaSui |
```

4️⃣ **更新下一个可用编号**
```
下一个可用编号 = 63
```

### 废弃需求时

1️⃣ **在 requirements.md 中标记**
```markdown
### 需求 42：优惠券系统 [已废弃]

**废弃原因**：业务调整，功能下线
**废弃日期**：2025-10-26
```

2️⃣ **在本文件"已废弃需求"中记录**
```markdown
| 42  | 优惠券系统 | 业务调整 | 2025-10-26 | BaSui |
```

3️⃣ **不重用该编号**
```
编号 42 永久保留，新需求从 53 开始
```

---

## ✅ 检查清单

**创建新需求前**：
- [ ] 已读取本文件的"下一个可用编号"？
- [ ] 已规划好需求数量和编号范围？
- [ ] 已确认编号不与现有需求重复？

**创建新需求后**：
- [ ] 已更新"需求编号分配记录"表？
- [ ] 已更新"下一个可用编号"？
- [ ] 已在对应 Spec 的 requirements.md 中使用分配的编号？

**废弃需求后**：
- [ ] 已在 requirements.md 中标记 [已废弃]？
- [ ] 已在本文件的"已废弃需求"中记录？
- [ ] 已确认不重用该编号？

---

## 🎨 BaSui 的叮嘱

**编号管理三原则**：
1. 🔢 **全局唯一** - 每个需求编号全局唯一！
2. 📝 **先读后写** - 创建需求前先读本文件！
3. 🗑️ **不可重用** - 废弃的编号永久保留！

**座右铭**：
> 编号唯一，管理不乱！
> 先读后写，不留隐患！
> 废弃保留，可追溯性！💪✨

**违反规则？回炉重造！😤**

---

**本文件是需求编号的唯一来源，所有 AI 和开发人员必须严格遵守！** 🚀
